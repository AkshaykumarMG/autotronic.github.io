<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autocreditco documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autocreditco documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  CarManageComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/modules/user/car-manage/car-manage.component.ts</code>
</p>




    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                <code>OnInit</code>
    </p>


<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>


            <tr>
                <td class="col-md-3">encapsulation</td>
                <td class="col-md-9"><code>ViewEncapsulation.None</code></td>
            </tr>










            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-car-manage</code></td>
            </tr>






            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./car-manage.component.html</code></td>
            </tr>



            <tr>
                <td class="col-md-3">styleUrl</td>
                <td class="col-md-9"><code>./car-manage.component.scss</code></td>
            </tr>





        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#arrCarForm" >arrCarForm</a>
                            </li>
                            <li>
                                <a href="#arrCarFormCopy" >arrCarFormCopy</a>
                            </li>
                            <li>
                                <a href="#arrCarMedia" >arrCarMedia</a>
                            </li>
                            <li>
                                <a href="#arrCarMediaCopy" >arrCarMediaCopy</a>
                            </li>
                            <li>
                                <a href="#arrFilterOptions" >arrFilterOptions</a>
                            </li>
                            <li>
                                <a href="#arrListingStatus" >arrListingStatus</a>
                            </li>
                            <li>
                                <a href="#arrUserStore" >arrUserStore</a>
                            </li>
                            <li>
                                <a href="#arrVinInfo" >arrVinInfo</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                <a href="#cropperImage" >cropperImage</a>
                            </li>
                            <li>
                                <a href="#currentCropImageUrl" >currentCropImageUrl</a>
                            </li>
                            <li>
                                <a href="#dataVahicleCategory" >dataVahicleCategory</a>
                            </li>
                            <li>
                                <a href="#dataYearRange" >dataYearRange</a>
                            </li>
                            <li>
                                    <span class="modifier">Optional</span>
                                <a href="#dragDropInfo" >dragDropInfo</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier">Optional</span>
                                <a href="#dropListContainer" >dropListContainer</a>
                            </li>
                            <li>
                                    <span class="modifier">Optional</span>
                                <a href="#dropListReceiverElement" >dropListReceiverElement</a>
                            </li>
                            <li>
                                <a href="#formCar" >formCar</a>
                            </li>
                            <li>
                                <a href="#formVinDecode" >formVinDecode</a>
                            </li>
                            <li>
                                <a href="#isImageCropDialogOpen" >isImageCropDialogOpen</a>
                            </li>
                            <li>
                                <a href="#isVinDecodingDialogOpen" >isVinDecodingDialogOpen</a>
                            </li>
                            <li>
                                <a href="#isVINVerified" >isVINVerified</a>
                            </li>
                            <li>
                                <a href="#strEditId" >strEditId</a>
                            </li>
                            <li>
                                <a href="#strFormButtonTitle" >strFormButtonTitle</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addCar" >addCar</a>
                            </li>
                            <li>
                                <a href="#checkAndModifyDependantElementMovement" >checkAndModifyDependantElementMovement</a>
                            </li>
                            <li>
                                <a href="#checkElementDepend" >checkElementDepend</a>
                            </li>
                            <li>
                                <a href="#closeVerifyVIN" >closeVerifyVIN</a>
                            </li>
                            <li>
                                <a href="#compressImage" >compressImage</a>
                            </li>
                            <li>
                                <a href="#deleteFile" >deleteFile</a>
                            </li>
                            <li>
                                <a href="#dragDropped" >dragDropped</a>
                            </li>
                            <li>
                                <a href="#dragEntered" >dragEntered</a>
                            </li>
                            <li>
                                <a href="#dragMoved" >dragMoved</a>
                            </li>
                            <li>
                                <a href="#fileBrowseHandler" >fileBrowseHandler</a>
                            </li>
                            <li>
                                <a href="#findMediaFromArrCarMedia" >findMediaFromArrCarMedia</a>
                            </li>
                            <li>
                                <a href="#formatBytes" >formatBytes</a>
                            </li>
                            <li>
                                <a href="#getFormNameForValidation" >getFormNameForValidation</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                <a href="#onAddTaxesAndFees" >onAddTaxesAndFees</a>
                            </li>
                            <li>
                                <a href="#onDeleteTaxesAndFees" >onDeleteTaxesAndFees</a>
                            </li>
                            <li>
                                <a href="#onFileDropped" >onFileDropped</a>
                            </li>
                            <li>
                                <a href="#onSelectFeature" >onSelectFeature</a>
                            </li>
                            <li>
                                <a href="#prepareFilesList" >prepareFilesList</a>
                            </li>
                            <li>
                                <a href="#readURL" >readURL</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#resetFormData" >resetFormData</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#setCropImage" >setCropImage</a>
                            </li>
                            <li>
                                <a href="#showSelectedImageInCropDialog" >showSelectedImageInCropDialog</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#verifyVIN" >verifyVIN</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

    <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(router: Router, commonService: <a href="../injectables/CommonService.html" target="_self">CommonService</a>, csvService: <a href="../injectables/CSVService.html" target="_self">CSVService</a>, formBuilder: FormBuilder, httpService: <a href="../injectables/HttpService.html" target="_self">HttpService</a>, loaderService: <a href="../injectables/LoaderService.html" target="_self">LoaderService</a>, messageService: MessageService, activatedRoute: ActivatedRoute, localStorageService: <a href="../injectables/LocalStorageService.html" target="_self">LocalStorageService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="82" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:82</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>router</td>
                                                  
                                                        <td>
                                                                    <code>Router</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>commonService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/CommonService.html" target="_self" >CommonService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>csvService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/CSVService.html" target="_self" >CSVService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>formBuilder</td>
                                                  
                                                        <td>
                                                                    <code>FormBuilder</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>httpService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/HttpService.html" target="_self" >HttpService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>loaderService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LoaderService.html" target="_self" >LoaderService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>messageService</td>
                                                  
                                                        <td>
                                                                    <code>MessageService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>activatedRoute</td>
                                                  
                                                        <td>
                                                                    <code>ActivatedRoute</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>localStorageService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LocalStorageService.html" target="_self" >LocalStorageService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>





    <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addCar"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>addCar</b></span>
                        <a href="#addCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addCar()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="953"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:953</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Adds or updates a car listing based on the current form state.
This function handles both new car additions and updates to existing listings.
It processes form data, manages media uploads, and interacts with the backend API.</p>
<p>The function performs the following main tasks:</p>
<ol>
<li>Prepares the API object from form data</li>
<li>Validates critical fields like Carfax URL</li>
<li>Determines the seller type (dealer or private person)</li>
<li>Handles media uploads to AWS S3</li>
<li>Creates or updates the car listing in the database</li>
<li>Manages associated media (images, videos) for the listing</li>
<li>Provides user feedback through message service</li>
</ol>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves when the car addition or update process is complete</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkAndModifyDependantElementMovement"></a>
                    <span class="name">
                        <span ><b>checkAndModifyDependantElementMovement</b></span>
                        <a href="#checkAndModifyDependantElementMovement"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>checkAndModifyDependantElementMovement(elementValue: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="885"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:885</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Modifies dependent form elements based on the selection of a parent element.
This function updates the options available in child elements when a parent element&#39;s value changes.
It also enables previously disabled child fields.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>elementValue</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The selected value of the parent element</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object containing information about the change event, including the field to be updated</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                <p>void</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkElementDepend"></a>
                    <span class="name">
                        <span ><b>checkElementDepend</b></span>
                        <a href="#checkElementDepend"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>checkElementDepend(element: <a href="../interfaces/CommonElement.html" target="_self">CommonElement</a>, section: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="850"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:850</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Checks and manages the dependency of form elements.
This function handles enabling/disabling of dependent elements and sets up change listeners for parent elements.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="../interfaces/CommonElement.html" target="_self" >CommonElement</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The form element to check for dependencies</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>section</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The section of the form where the element is located</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>A boolean indicating whether the element should be disabled due to dependency</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="closeVerifyVIN"></a>
                    <span class="name">
                        <span ><b>closeVerifyVIN</b></span>
                        <a href="#closeVerifyVIN"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>closeVerifyVIN()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1696"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1696</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Closes the VIN verification dialog and resets related form and state variables.</p>
<p>This function performs the following actions:</p>
<ol>
<li>Closes the VIN decoding dialog by setting the flag to false.</li>
<li>Resets the VIN decode form to its initial state.</li>
<li>Sets the VIN verification status to false.</li>
</ol>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="compressImage"></a>
                    <span class="name">
                        <span ><b>compressImage</b></span>
                        <a href="#compressImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>compressImage(src: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, newX: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, newY: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1531"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1531</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Compresses an image to a specified size.</p>
<p>This function takes an image source and resizes it to the specified dimensions.
The compressed image is returned as a base64-encoded data URL.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">     Rejects with an error if the image fails to load.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>src</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The source of the image. Can be a URL or a base64-encoded string.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>newX</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The desired width of the compressed image in pixels.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>newY</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The desired height of the compressed image in pixels.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;string&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A Promise that resolves with the compressed image as a base64-encoded data URL.
Rejects with an error if the image fails to load.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteFile"></a>
                    <span class="name">
                        <span ><b>deleteFile</b></span>
                        <a href="#deleteFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>deleteFile(index: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, parent: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1383"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1383</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Deletes a file from the car media array and updates form validation.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>index</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The index of the file to be deleted in the car media array.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The element object containing information about the file input field.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The parent object containing information about the form section.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragDropped"></a>
                    <span class="name">
                        <span ><b>dragDropped</b></span>
                        <a href="#dragDropped"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dragDropped(event: CdkDragDrop<any>, field: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1783"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1783</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the completion of a drag and drop operation for car media items.
This function updates the positions of the dragged items in the car media array
and resets the drag and drop related properties.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>CdkDragDrop&lt;any&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The drag and drop event object containing information about the completed drag operation.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>field</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The field name identifying the specific media type being reordered (e.g., &#39;images&#39;, &#39;videos&#39;).</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragEntered"></a>
                    <span class="name">
                        <span ><b>dragEntered</b></span>
                        <a href="#dragEntered"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dragEntered(event: CdkDragEnter<any>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1718"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1718</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the event when a dragged item enters a new drop container.
This function sets up the drag and drop information and adjusts the placeholder element&#39;s position.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">                               It includes details about the dragged item and the container it&#39;s entering.</code></pre></div><p>This function performs the following actions:</p>
<ol>
<li>Extracts drag and drop indices from the event.</li>
<li>Updates the dragDropInfo property with these indices.</li>
<li>Locates the placeholder element within the drop container.</li>
<li>If a placeholder is found, it removes it from its current position and inserts it before the container.</li>
</ol>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>CdkDragEnter&lt;any&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The drag enter event object containing information about the drag operation.
It includes details about the dragged item and the container it&#39;s entering.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragMoved"></a>
                    <span class="name">
                        <span ><b>dragMoved</b></span>
                        <a href="#dragMoved"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dragMoved(event: CdkDragMove<any>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1752"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1752</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the drag movement event during a drag and drop operation.
This function updates the visual representation of the drag operation by
manipulating the placeholder and receiver elements.</p>
<p>This function performs the following actions:</p>
<ol>
<li>Checks if the necessary container and drag info are available.</li>
<li>Locates the placeholder element within the drop list container.</li>
<li>Determines the receiver element based on the drag direction.</li>
<li>Hides the receiver element to create space for the dragged item.</li>
<li>Stores the receiver element for later use in the drop operation.</li>
</ol>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>CdkDragMove&lt;any&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The drag move event object containing information about the current drag state.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fileBrowseHandler"></a>
                    <span class="name">
                        <span ><b>fileBrowseHandler</b></span>
                        <a href="#fileBrowseHandler"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>fileBrowseHandler(files: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, parent: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1370"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1370</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the file browse event when files are selected through a file input.
This function delegates the file processing to the prepareFilesList method.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>files</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The FileList object containing the files selected by the user.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The DOM element or component associated with the file input.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The parent component or container of the file input.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findMediaFromArrCarMedia"></a>
                    <span class="name">
                        <span ><b>findMediaFromArrCarMedia</b></span>
                        <a href="#findMediaFromArrCarMedia"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>findMediaFromArrCarMedia(element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="930"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:930</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Finds and sorts media elements from the car media array based on the given element name.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">     The returned array is sorted by the &#39;position&#39; field in ascending numerical order.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object containing the &#39;name&#39; property to match against media fields.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>An array of sorted media elements if found, or null if no matching media is found.
The returned array is sorted by the &#39;position&#39; field in ascending numerical order.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formatBytes"></a>
                    <span class="name">
                        <span ><b>formatBytes</b></span>
                        <a href="#formatBytes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>formatBytes(bytes: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, decimals: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1559"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1559</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Formats a given number of bytes into a human-readable string representation.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">              If not provided or less than or equal to 0, it defaults to 0.
              If provided and greater than 0, it defaults to 2.
     Returns &quot;0 Bytes&quot; if the input is 0.</code></pre></div></div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bytes</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                            <td>
                                                    <ul>
<li>The number of bytes to format. Should be a positive number or zero.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>decimals</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>0</code>
                                            </td>

                                            <td>
                                                    <ul>
<li>The number of decimal places to include in the formatted output. 
If not provided or less than or equal to 0, it defaults to 0.
If provided and greater than 0, it defaults to 2.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                <p>A string representing the formatted byte size with appropriate unit (e.g., &quot;1.5 MB&quot;).
Returns &quot;0 Bytes&quot; if the input is 0.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFormNameForValidation"></a>
                    <span class="name">
                        <span ><b>getFormNameForValidation</b></span>
                        <a href="#getFormNameForValidation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFormNameForValidation(section: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="919"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:919</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Generates a form control name for validation purposes by combining the section value and element name.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>section</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object representing a form section, which should contain a &#39;value&#39; property.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object representing a form element, which should contain a &#39;name&#39; property.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                <p>A string that represents the full form control name, formatted as &#39;lowercaseSectionValue.elementName&#39;.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ngOnInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="111"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:111</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initializes the component, setting up forms, fetching data, and handling car editing.</p>
<p>This method performs the following tasks:</p>
<ol>
<li>Checks the user type (dealer or not)</li>
<li>Fetches store information for dealers</li>
<li>Retrieves and processes filter options for the car form</li>
<li>Sets up the car form with various sections (VIN &amp; Model, Price &amp; Status, etc.)</li>
<li>Handles car editing if an ID is provided in the URL</li>
<li>Initializes form controls and sets up validators</li>
<li>Populates form with existing car data when editing</li>
<li>Handles media (images and videos) for the car</li>
</ol>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves when initialization is complete</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onAddTaxesAndFees"></a>
                    <span class="name">
                        <span ><b>onAddTaxesAndFees</b></span>
                        <a href="#onAddTaxesAndFees"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onAddTaxesAndFees(parent: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1301"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1301</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Adds a new fees or taxes dynamic form group to the specified parent form group.</p>
<p>This function creates a new form group with three form controls: &#39;type&#39;, &#39;value&#39;, and &#39;mode&#39;.
It then adds this new group to the specified parent form group.
It also updates the corresponding data array in the <code>arrCarForm</code> array to reflect the addition of the new fees or taxes.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The name of the parent form group to which the new group will be added.</li>
</ul>
<p>This function creates a new form group with three form controls: &#39;type&#39;, &#39;value&#39;, and &#39;mode&#39;.
It then adds this new group to the specified parent form group.
It also updates the corresponding data array in the <code>arrCarForm</code> array to reflect the addition of the new fees or taxes.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDeleteTaxesAndFees"></a>
                    <span class="name">
                        <span ><b>onDeleteTaxesAndFees</b></span>
                        <a href="#onDeleteTaxesAndFees"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDeleteTaxesAndFees(parent: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1287"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1287</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Deletes a fees or taxes dynamic form group from the specified parent form group.</p>
<p>This function removes the specified group from the parent form group,
and also updates the corresponding data array in the <code>arrCarForm</code> array to reflect the deletion.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The name of the parent form group from which the group will be deleted.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>index</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The index of the group to be deleted within the parent form group.</li>
</ul>
<p>This function removes the specified group from the parent form group,
and also updates the corresponding data array in the <code>arrCarForm</code> array to reflect the deletion.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onFileDropped"></a>
                    <span class="name">
                        <span ><b>onFileDropped</b></span>
                        <a href="#onFileDropped"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onFileDropped(event: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, parent: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1356"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1356</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the file drop event for drag-and-drop file uploads.
This function delegates the file processing to the prepareFilesList method.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The drop event containing the files dropped by the user.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The DOM element or component where the files were dropped.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The parent component or container of the drop target.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onSelectFeature"></a>
                    <span class="name">
                        <span ><b>onSelectFeature</b></span>
                        <a href="#onSelectFeature"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onSelectFeature(event: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, item: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1503"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1503</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handles the selection of a feature in the car form.</p>
<p>This function prevents the default and propagation of the event,
then retrieves the current value of the form control associated with the given name.
If the control&#39;s value is empty or does not exist, it sets the control&#39;s value to an array containing the selected item.
If the control&#39;s value already contains the selected item, it removes the item from the array.
If the control&#39;s value does not contain the selected item, it adds the item to the array.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The event that triggered the function.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The name of the form control associated with the feature.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>item</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The item representing the selected feature.</li>
</ul>
<p>This function prevents the default and propagation of the event,
then retrieves the current value of the form control associated with the given name.
If the control&#39;s value is empty or does not exist, it sets the control&#39;s value to an array containing the selected item.
If the control&#39;s value already contains the selected item, it removes the item from the array.
If the control&#39;s value does not contain the selected item, it adds the item to the array.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="prepareFilesList"></a>
                    <span class="name">
                        <span ><b>prepareFilesList</b></span>
                        <a href="#prepareFilesList"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>prepareFilesList(files: Array<any>, element: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, parent: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1418"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1418</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Prepares and processes a list of files for upload, performing various checks and validations.</p>
<p>This function handles file type validation, duplicate file detection, file size checking,
and adds valid files to the car media array for future upload. It also generates preview URLs
for images and videos.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>files</td>
                                            <td>
                                                        <code>Array&lt;any&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An array of file objects to be processed and prepared for upload.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>element</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object containing metadata about the upload field, including accepted file types and size limits.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>parent</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>An object representing the parent form or container of the upload field.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                <p>This function doesn&#39;t return a value, but it updates the component&#39;s state and form validations.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="readURL"></a>
                    <span class="name">
                        <span ><b>readURL</b></span>
                        <a href="#readURL"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>readURL(input: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, id: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1478"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1478</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Reads the contents of a file input and sets the source of an image element with the result.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>input</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The file input element or File object to read from.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The ID of the image element whose source will be set.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Additional data (not used in the current implementation).</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>A Promise that resolves when the file is read, or undefined if there&#39;s no input.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="resetFormData"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>resetFormData</b></span>
                        <a href="#resetFormData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>resetFormData()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1158"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1158</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Resets the form data and reinitializes various form-related properties.
This function performs the following tasks:</p>
<ul>
<li>Closes the VIN decoding dialog if open</li>
<li>Resets the car form with default values</li>
<li>Clears all images and videos from the form</li>
<li>Removes and re-adds tax and fees controls</li>
<li>Sets up HST and interest rate taxes based on user type and store details</li>
<li>Resets edit-related properties</li>
<li>Prepares the form array for media uploads</li>
</ul>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves when all reset operations are complete</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setCropImage"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>setCropImage</b></span>
                        <a href="#setCropImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setCropImage(event?: ImageCroppedEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1577"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1577</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Sets the cropped image in the media array and updates the preview URL.
If no event is provided, it triggers the cropping process.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>ImageCroppedEvent</code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                            <td>
                                                    <ul>
<li>Optional. The ImageCroppedEvent containing the cropped image data.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A Promise that resolves when the cropped image is set and compressed.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showSelectedImageInCropDialog"></a>
                    <span class="name">
                        <span ><b>showSelectedImageInCropDialog</b></span>
                        <a href="#showSelectedImageInCropDialog"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>showSelectedImageInCropDialog(url: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, position: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, file: File)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1602"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1602</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Opens the image crop dialog and sets the current image for cropping.</p>
<p>This function prepares the selected image for cropping by setting the necessary
properties and opening the crop dialog.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>url</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The URL or data URI of the image to be cropped.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>position</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The position of the image in the media array.</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>file</td>
                                            <td>
                                                        <code>File</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>The File object representing the image.</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="verifyVIN"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>verifyVIN</b></span>
                        <a href="#verifyVIN"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>verifyVIN()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1624"
                                    class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:1624</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Verifies the Vehicle Identification Number (VIN) and populates the form with decoded information.</p>
<p>This function sends a request to verify the VIN, and if successful, it updates various form fields
with the decoded vehicle information. It handles data formatting, performs dropdown updates,
and sets default values for missing information.</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">await this.verifyVIN();</code></pre></div></div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>A promise that resolves when the VIN verification process is complete.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrCarForm"></a>
                    <span class="name">
                        <span ><b>arrCarForm</b></span>
                        <a href="#arrCarForm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/CarForm.html" target="_self" >CarForm[] | undefined</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:32</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrCarFormCopy"></a>
                    <span class="name">
                        <span ><b>arrCarFormCopy</b></span>
                        <a href="#arrCarFormCopy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/CarForm.html" target="_self" >CarForm[] | undefined</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:33</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrCarMedia"></a>
                    <span class="name">
                        <span ><b>arrCarMedia</b></span>
                        <a href="#arrCarMedia"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:36</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrCarMediaCopy"></a>
                    <span class="name">
                        <span ><b>arrCarMediaCopy</b></span>
                        <a href="#arrCarMediaCopy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:37</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrFilterOptions"></a>
                    <span class="name">
                        <span ><b>arrFilterOptions</b></span>
                        <a href="#arrFilterOptions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:43</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrListingStatus"></a>
                    <span class="name">
                        <span ><b>arrListingStatus</b></span>
                        <a href="#arrListingStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[&#x27;live&#x27;, &#x27;sold&#x27;, &#x27;removed&#x27;, &#x27;staging&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="58" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:58</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrUserStore"></a>
                    <span class="name">
                        <span ><b>arrUserStore</b></span>
                        <a href="#arrUserStore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrVinInfo"></a>
                    <span class="name">
                        <span ><b>arrVinInfo</b></span>
                        <a href="#arrVinInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="77" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:77</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cropperImage"></a>
                    <span class="name">
                            <span class="modifier"></span>
                        <span ><b>cropperImage</b></span>
                        <a href="#cropperImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ImageCropperComponent</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <b>Decorators : </b>
                        <br />
                        <code>
                            @ViewChild(&#x27;cropperImage&#x27;)<br />
                        </code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="74" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:74</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentCropImageUrl"></a>
                    <span class="name">
                        <span ><b>currentCropImageUrl</b></span>
                        <a href="#currentCropImageUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{ url: &#x27;&#x27;, position: 0, file: File }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="73" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:73</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dataVahicleCategory"></a>
                    <span class="name">
                        <span ><b>dataVahicleCategory</b></span>
                        <a href="#dataVahicleCategory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/LabelValueData.html" target="_self" >LabelValueData[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[
    { label: &quot;Car&quot;, value: &quot;car&quot; }
  ]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="53" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:53</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dataYearRange"></a>
                    <span class="name">
                        <span ><b>dataYearRange</b></span>
                        <a href="#dataYearRange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>() &#x3D;&gt; {...}</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:50</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragDropInfo"></a>
                    <span class="name">
                            <span class="modifier">Optional</span>
                        <span ><b>dragDropInfo</b></span>
                        <a href="#dragDropInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>literal type</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="66" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:66</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dropListContainer"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier">Optional</span>
                        <span ><b>dropListContainer</b></span>
                        <a href="#dropListContainer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ElementRef</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <b>Decorators : </b>
                        <br />
                        <code>
                            @ViewChild(&#x27;dropListContainer&#x27;)<br />
                        </code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:64</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dropListReceiverElement"></a>
                    <span class="name">
                            <span class="modifier">Optional</span>
                        <span ><b>dropListReceiverElement</b></span>
                        <a href="#dropListReceiverElement"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>HTMLElement</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="65" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:65</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formCar"></a>
                    <span class="name">
                        <span ><b>formCar</b></span>
                        <a href="#formCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>FormGroup</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formBuilder.group({})</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:61</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formVinDecode"></a>
                    <span class="name">
                        <span ><b>formVinDecode</b></span>
                        <a href="#formVinDecode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formBuilder.group({
    number: new FormControl(null, [Validators.required, Validators.minLength(17), Validators.maxLength(17)])
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="80" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:80</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isImageCropDialogOpen"></a>
                    <span class="name">
                        <span ><b>isImageCropDialogOpen</b></span>
                        <a href="#isImageCropDialogOpen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="72" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:72</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isVinDecodingDialogOpen"></a>
                    <span class="name">
                        <span ><b>isVinDecodingDialogOpen</b></span>
                        <a href="#isVinDecodingDialogOpen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:78</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isVINVerified"></a>
                    <span class="name">
                        <span ><b>isVINVerified</b></span>
                        <a href="#isVINVerified"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:79</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="strEditId"></a>
                    <span class="name">
                        <span ><b>strEditId</b></span>
                        <a href="#strEditId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string | undefined</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="46" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:46</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="strFormButtonTitle"></a>
                    <span class="name">
                        <span ><b>strFormButtonTitle</b></span>
                        <a href="#strFormButtonTitle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&quot;Add Car&quot;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/app/modules/user/car-manage/car-manage.component.ts:47</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, ElementRef, OnInit, ViewChild, ViewEncapsulation } from &#x27;@angular/core&#x27;;
import { HttpErrorResponse } from &#x27;@angular/common/http&#x27;;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;;
import { FormBuilder, FormControl, FormGroup, Validators } from &#x27;@angular/forms&#x27;;
import { CdkDragDrop, CdkDragEnter, CdkDragMove } from &#x27;@angular/cdk/drag-drop&#x27;;

// image cropper
import { ImageCroppedEvent, ImageCropperComponent, base64ToFile } from &#x27;ngx-image-cropper&#x27;;

// custom service
import { CSVService } from &#x27;../../../utilities/services/csv.service&#x27;;
import { HttpService } from &#x27;./../../../utilities/services/http.service&#x27;;
import { CommonService } from &#x27;./../../../utilities/services/common.service&#x27;;
import { LoaderService } from &#x27;./../../../utilities/services/loader.service&#x27;;
import { LocalStorageService } from &#x27;../../../utilities/services/local-storage.service&#x27;;

// get dynamic form
import { CarForm, CommonElement, LabelValueData } from &#x27;./car.interface&#x27;;

// primeng
import { MessageService } from &#x27;primeng/api&#x27;;

@Component({
  selector: &#x27;app-car-manage&#x27;,
  templateUrl: &#x27;./car-manage.component.html&#x27;,
  styleUrl: &#x27;./car-manage.component.scss&#x27;,
  encapsulation: ViewEncapsulation.None
})
export class CarManageComponent implements OnInit {

  // form in array - copy for future to reload data
  arrCarForm: CarForm[] | undefined;
  arrCarFormCopy: CarForm[] | undefined;

  // store all car media
  arrCarMedia: any &#x3D; []
  arrCarMediaCopy: any &#x3D; [];

  // get user stores
  arrUserStore: any;

  // get filter from backend and store in array
  arrFilterOptions: any &#x3D; [];

  // edit operation
  strEditId: string | undefined;
  strFormButtonTitle: string &#x3D; &quot;Add Car&quot;;

  // year range for form
  dataYearRange &#x3D; (start: number, stop: number, step: number) &#x3D;&gt; Array.from({ length: (stop - start) / step + 1 }, (_, i) &#x3D;&gt; start + (i * step));

  // vahicle category
  dataVahicleCategory: LabelValueData[] &#x3D; [
    { label: &quot;Car&quot;, value: &quot;car&quot; }
  ];

  // vahicle listing status
  arrListingStatus &#x3D; [&#x27;live&#x27;, &#x27;sold&#x27;, &#x27;removed&#x27;, &#x27;staging&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } });

  // car form
  formCar: FormGroup &#x3D; this.formBuilder.group({});

  //drag and drop sorting
  @ViewChild(&#x27;dropListContainer&#x27;) dropListContainer?: ElementRef;
  dropListReceiverElement?: HTMLElement;
  dragDropInfo?: {
    dragIndex: number;
    dropIndex: number;
  };

  // crop images
  isImageCropDialogOpen: boolean &#x3D; false;
  currentCropImageUrl &#x3D; { url: &#x27;&#x27;, position: 0, file: File };
  @ViewChild(&quot;cropperImage&quot;) cropperImage!: ImageCropperComponent;

  // vin decoding
  arrVinInfo: any;
  isVinDecodingDialogOpen: boolean &#x3D; false;
  isVINVerified: boolean &#x3D; false;
  formVinDecode &#x3D; this.formBuilder.group({
    number: new FormControl(null, [Validators.required, Validators.minLength(17), Validators.maxLength(17)])
  });

  constructor(
    protected readonly router: Router,
    readonly commonService: CommonService,
    private readonly csvService: CSVService,
    private readonly formBuilder: FormBuilder,
    private readonly httpService: HttpService,
    private readonly loaderService: LoaderService,
    private readonly messageService: MessageService,
    protected readonly activatedRoute: ActivatedRoute,
    readonly localStorageService: LocalStorageService,
  ) { }

  /**
 * Initializes the component, setting up forms, fetching data, and handling car editing.
 * 
 * This method performs the following tasks:
 * 1. Checks the user type (dealer or not)
 * 2. Fetches store information for dealers
 * 3. Retrieves and processes filter options for the car form
 * 4. Sets up the car form with various sections (VIN &amp; Model, Price &amp; Status, etc.)
 * 5. Handles car editing if an ID is provided in the URL
 * 6. Initializes form controls and sets up validators
 * 7. Populates form with existing car data when editing
 * 8. Handles media (images and videos) for the car
 * 
 * @returns {Promise&lt;void&gt;} A promise that resolves when initialization is complete
 */
  async ngOnInit(): Promise&lt;void&gt; {

    // check user type
    const isUserDealer &#x3D; this.localStorageService.userIsDealer();

    let store: any;
    if (isUserDealer) {
      // get user store
      store &#x3D; await this.httpService.get(&#x27;store&#x27;);
      if (!store || store.length &#x3D;&#x3D; 0) {
        this.router.navigateByUrl(&#x27;/user/store&#x27;);
        return
      }
    }

    // get dynamic data from filter
    this.arrFilterOptions &#x3D; await this.httpService.get(&#x27;filter&#x27;);
    // get data for specification which are checkbox
    const arrTempFilter &#x3D; this.arrFilterOptions.data.map((element: any) &#x3D;&gt; {
      if (element.type !&#x3D;&#x3D; &#x27;checkbox&#x27; || element.name.value &#x3D;&#x3D;&#x3D; &#x27;condition&#x27; || element.name.value &#x3D;&#x3D;&#x3D; &#x27;seller_type&#x27;) return
      return {
        type: &#x27;dropdown&#x27;,
        name: element.name.value,
        data: element.data,
        placeholder: &#x27;Select &#x27; + element.name.label,
        class: &#x27;col-4&#x27;,
        required: true,
        dependant: element.dependant ?? false,
        dependant_field: element.dependant_field ? element.dependant_field : null
      }
    }).filter((element: any) &#x3D;&gt; element !&#x3D;&#x3D; undefined);
    // get data for specification which are textbox-list
    const arrTempMain &#x3D; this.arrFilterOptions.data.sort((a: any, b: any) &#x3D;&gt; a.position - b.position ? -1 : 1).map((element: any) &#x3D;&gt; {
      if (element.type !&#x3D;&#x3D; &#x27;textbox-list&#x27;) return
      return {
        type: &#x27;dropdown&#x27;,
        name: element.name.value,
        data: this.commonService.sortArrayField(element.data, &#x27;label&#x27;, &#x27;string&#x27;),
        placeholder: &#x27;Select &#x27; + element.name.label,
        class: &#x27;col-4&#x27;,
        position: element.position,
        required: true,
        dependant: element.dependant,
        dependant_field: element.dependant_field ? element.dependant_field : null
      }
    }).filter((element: any) &#x3D;&gt; element !&#x3D;&#x3D; undefined);
    // get data for specification which are multi-select
    const arrTempMultiSelect &#x3D; this.arrFilterOptions.data.map((element: any) &#x3D;&gt; {
      if (element.type !&#x3D;&#x3D; &#x27;multi-select&#x27;) return
      return {
        type: &#x27;multi-select&#x27;,
        name: element.name.value,
        data: element.data.map((multi: any) &#x3D;&gt; { return { label: multi.label, value: multi.value } }),
        placeholder: &#x60;Select ${element.name.label}&#x60;,
        class: &#x27;col-12&#x27;,
        position: element.position,
        required: true,
        dependant: element.dependant,
        dependant_field: element.dependant_field ? element.dependant_field : null
      }
    }).sort((a: any, b: any) &#x3D;&gt; a.position - b.position).filter((element: any) &#x3D;&gt; element !&#x3D;&#x3D; undefined);
    // get data for specification which are multi-choice
    const arrTempMultiChoice &#x3D; this.arrFilterOptions.data.map((element: any) &#x3D;&gt; {
      if (element.type !&#x3D;&#x3D; &#x27;multi-choice&#x27;) return
      return {
        type: &#x27;multi-choice&#x27;,
        name: element.name.value,
        data: element.data.map((multi: any) &#x3D;&gt; { return { label: multi.label, value: multi.value } }),
        placeholder: &#x60;Select ${element.name.label}&#x60;,
        class: &#x27;col-4&#x27;,
        position: element.position,
        required: true,
        dependant: element.dependant,
        dependant_field: element.dependant_field ? element.dependant_field : null
      }
    }).sort((a: any, b: any) &#x3D;&gt; a.position - b.position).filter((element: any) &#x3D;&gt; element !&#x3D;&#x3D; undefined);

    // if user is dealer then then fill all his company information
    if (store &amp;&amp; store.length &gt; 0 &amp;&amp; this.localStorageService.userIsDealer()) {
      this.arrUserStore &#x3D; store;
    }

    // prepare array in form format
    this.arrCarForm &#x3D; [
      {
        name: &#x27;VIN &amp; Model&#x27;,
        value: &#x27;introduction&#x27;,
        data: [
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;category&#x27;,
            value: &#x27;car&#x27;,
            placeholder: &#x27;Vehicle Category&#x27;,
            data: this.dataVahicleCategory,
            class: &quot;col-4&quot;,
            required: true
          },
          ...arrTempMain,
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;year&#x27;,
            placeholder: &#x27;Year&#x27;,
            data: this.dataYearRange((new Date()).getFullYear(), (new Date()).getFullYear() - 50, -1).map((year: number) &#x3D;&gt; { return { label: year, value: year } }),
            class: &quot;col-4&quot;,
            required: true
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;vin_number&quot;,
            placeholder: &quot;VIN Number&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false,
            pattern: { type: &#x27;number&#x27;, label: &#x27;^[0-9A-Za-z]{17}$&#x27;, value: 17 },
            keyFilter: &#x27;alphanum&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;stock_number&quot;,
            placeholder: &quot;Stock Number&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false,
            readonly: true
          },
          // {
          //   type: &#x27;dropdown&#x27;,
          //   name: &#x27;store&#x27;,
          //   placeholder: &#x27;Select Store&#x27;,
          //   value: isUserDealer ? this.arrUserStore[0]._id : undefined,
          //   data: isUserDealer ? this.arrUserStore.map((store: any) &#x3D;&gt; { return { label: store.name + &#x27; - &#x27; + store.alias, value: store._id } }) : [],
          //   class: &quot;col-4&quot;,
          //   required: !!isUserDealer
          // },
        ]
      },
      {
        name: &#x27;Price &amp; Status&#x27;,
        value: &#x27;price_status&#x27;,
        data: [
          {
            type: &#x27;select-button&#x27;,
            name: &#x27;condition&#x27;,
            data: [&#x27;new&#x27;, &#x27;used&#x27;, &#x27;damaged&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } }),
            required: true,
            value: &#x27;new&#x27;,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;status&#x27;,
            value: &#x27;live&#x27;,
            placeholder: &#x27;Listing Status&#x27;,
            data: this.arrListingStatus,
            required: true,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;publish_to&#x27;,
            placeholder: &#x27;Publishing To&#x27;,
            value: &#x27;euro_exoti_car&#x27;,
            data: [&#x27;euro_exoti_car&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } }),
            required: true,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;asking_price&quot;,
            placeholder: &quot;Asking Price&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: true,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;sales_price&quot;,
            placeholder: &quot;Sales Price&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: false,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;msrp&quot;,
            placeholder: &quot;MSRP&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: false,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;invoice_price&quot;,
            placeholder: &quot;Invoice Price&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: false,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;retail_price&quot;,
            placeholder: &quot;Retail Price&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: false,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;wholesale_price&quot;,
            placeholder: &quot;Wholesale Price&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;currency&#x27;,
            required: false,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;editor&#x27;,
            name: &quot;description&quot;,
            placeholder: &quot;Description&quot;,
            class: &quot;col-12&quot;,
            required: true
          },
          {
            type: &#x27;editor&#x27;,
            name: &quot;warrenty_description&quot;,
            placeholder: &quot;Warrenty Description&quot;,
            class: &quot;col-12&quot;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;odometer&quot;,
            placeholder: &quot;Odometer&quot;,
            class: &quot;col-4&quot;,
            datatype: &#x27;number&#x27;,
            format: &#x27;group&#x27;,
            required: true,
            group_right: &#x27;string&#x27;,
            group_string: &#x27;KM&#x27;,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;in_stock_date&quot;,
            placeholder: &quot;Instock Date&quot;,
            class: &quot;col-4&quot;,
            minDate: new Date(),
            format: &#x27;date&#x27;,
            dateFormat: &#x27;dd/mm/yy&#x27;,
            required: true
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;carafax&quot;,
            placeholder: &quot;Enter Carafax URL&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;city_fuel_economy&quot;,
            placeholder: &quot;City Fuel Economy (L/100km)&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;number&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;highway_fuel_economy&quot;,
            placeholder: &quot;Hightway Fuel Economy (L/100km)&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;number&#x27;
          },
        ]
      },
      {
        name: &#x27;Taxes &amp; Fees&#x27;,
        value: &#x27;taxes_fees&#x27;,
        data: []
      },
      {
        name: &#x27;Images &amp; Videos&#x27;,
        value: &#x27;media&#x27;,
        data: [
          {
            type: &#x27;upload&#x27;,
            name: &#x27;images&#x27;,
            accept: &#x27;image/jpeg,image/jpg&#x27;,
            multiple: true,
            maxSize: 2,
            class: &#x27;col-12&#x27;,
            required: true,
            note: &#x27;Maximum 2 MB per file (At least 8 images are recommended - JPG or JPEG formats are allowed. Maximum 30 images per listing.)&#x27;
          },
          {
            type: &#x27;upload&#x27;,
            name: &#x27;videos&#x27;,
            accept: &#x27;video/mp4&#x27;,
            multiple: true,
            maxSize: 300,
            class: &#x27;col-12&#x27;,
            required: false,
            note: &#x27;Maximum of 300 MB per file (MP4 formats are allowed). Maximum of 10 videos per listing.&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;video_url&quot;,
            placeholder: &quot;Video URL&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false,
            note: &#x27;Enter full URL of the video.&#x27;
          },
        ]
      },
      {
        name: &#x27;Specifications&#x27;,
        value: &#x27;specifications&#x27;,
        data: [...arrTempFilter, ...arrTempMultiChoice, ...arrTempMultiSelect]
      },
      {
        name: &#x27;Window Sticker&#x27;,
        value: &#x27;window_sticker&#x27;,
        data: [
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;warrenty_of_sale&#x27;,
            placeholder: &#x27;Warrenty Sale&#x27;,
            data: [&#x27;1_month_or_1700_km&#x27;, &#x27;2_month_or_3500_km&#x27;, &#x27;3_month_or_5200_km&#x27;, &#x27;none&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } }),
            required: false,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;warrenty_of_sale_details&quot;,
            placeholder: &quot;Warrenty details&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;OEM_balance_guarentee_KM&quot;,
            placeholder: &quot;OEM Warrenty KM&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;OEM_balance_guarentee_expiration&quot;,
            placeholder: &quot;Warrenty Expiration Date&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;date&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;supplementary_coverage_odometer&quot;,
            placeholder: &quot;Supplementary Coverage&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;supplementary_coverage_expiration&quot;,
            placeholder: &quot;Supplementary coverage expiration&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;date&#x27;,
            required: false
          },
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;previous_owner_type&#x27;,
            placeholder: &#x27;Previous owner type&#x27;,
            data: [&#x27;commercial&#x27;, &#x27;private&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } }),
            required: false,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;previous_owner&quot;,
            placeholder: &quot;Previous Owner&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;previous_use&#x27;,
            placeholder: &#x27;Previous use&#x27;,
            data: [&#x27;ambulance&#x27;, &#x27;police_vehicle&#x27;, &#x27;rental_vahicle&#x27;, &#x27;taxi&#x27;].map((type: string) &#x3D;&gt; { return { label: this.commonService.replaceStringToCapitalize(type), value: type } }),
            required: false,
            class: &#x27;col-4&#x27;
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;kilometers_real_value&quot;,
            placeholder: &quot;Kilometers (real value)&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;dealer_repair_details&quot;,
            placeholder: &quot;Dealter Repair Details&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: false
          },
          {
            type: &#x27;checkbox&#x27;,
            name: &quot;financing_available&quot;,
            placeholder: &quot;Finance Available&quot;,
            class: &quot;col-4&quot;,
            required: false
          },
        ]
      }
    ];

    // store apr field add in fees and tax
    if (!this.activatedRoute.snapshot.queryParams[&#x27;id&#x27;]) {
      // set hst &amp; intrest rate tax by user identity
      if (isUserDealer) {
        const StoreDetail: any &#x3D; await this.httpService.get(&#x60;store/${this.localStorageService.get(&#x27;store&#x27;)}&#x60;);
        const csv: any &#x3D; await this.httpService.getWithOutsideURLCSV(&#x27;assets/csv/rate-table.csv&#x27;);
        const taxState: any &#x3D; this.csvService.CSVToJSON(csv).find((element: any) &#x3D;&gt; element.JRSD_CD &#x3D;&#x3D;&#x3D; StoreDetail.address.state).VPR1_HST;
        if (taxState) {
          this.arrCarForm.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)?.data.push({
            type: &#x27;selection&#x27;,
            class: &quot;col-12&quot;,
            removed: false,
            element: [
              {
                type: &#x27;textbox&#x27;,
                name: &quot;type&quot;,
                value: &#x27;HST&#x27;,
                readonly: true,
                placeholder: &quot;Enter Tax Or Fee Type&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
              },
              {
                type: &#x27;textbox&#x27;,
                name: &quot;value&quot;,
                value: Number(taxState),
                placeholder: &quot;Enter Tax Or Fee Value&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
                keyFilter: &#x27;int&#x27;
              },
              {
                type: &#x27;dropdown&#x27;,
                name: &#x27;mode&#x27;,
                placeholder: &#x27;Select Calculation Mode&#x27;,
                value: &#x27;%&#x27;,
                data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type } }),
                required: true,
                class: &#x27;col-3&#x27;
              },
            ]
          } as any);
        }

        if (StoreDetail?.finance_apr) {
          this.arrCarForm.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)?.data.push({
            type: &#x27;selection&#x27;,
            class: &quot;col-12&quot;,
            name: &#x27;state_tax&#x27;,
            removed: true,
            element: [
              {
                type: &#x27;textbox&#x27;,
                name: &quot;type&quot;,
                placeholder: &quot;Enter Tax Or Fee Type&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
                value: &#x27;Interest Rate&#x27;
              },
              {
                type: &#x27;textbox&#x27;,
                name: &quot;value&quot;,
                placeholder: &quot;Enter Tax Or Fee Value&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
                keyFilter: &#x27;int&#x27;,
                value: StoreDetail.finance_apr
              },
              {
                type: &#x27;dropdown&#x27;,
                name: &#x27;mode&#x27;,
                placeholder: &#x27;Select Calculation Mode&#x27;,
                value: &#x27;%&#x27;,
                data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type } }),
                required: true,
                class: &#x27;col-3&#x27;
              },
            ]
          } as any)
        }
      } else {
        const user: any &#x3D; await this.httpService.get(&#x27;user/profile&#x27;);
        const csv: any &#x3D; await this.httpService.getWithOutsideURLCSV(&#x27;assets/csv/rate-table.csv&#x27;);
        const taxState: any &#x3D; this.csvService.CSVToJSON(csv).find((element: any) &#x3D;&gt; element.JRSD_CD &#x3D;&#x3D;&#x3D; user.address.state).VPR1_HST;
        if (taxState) {
          this.arrCarForm.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)?.data.push({
            type: &#x27;selection&#x27;,
            class: &quot;col-12&quot;,
            removed: false,
            element: [
              {
                type: &#x27;textbox&#x27;,
                name: &quot;type&quot;,
                value: &#x27;HST&#x27;,
                readonly: true,
                placeholder: &quot;Enter Tax Or Fee Type&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
              },
              {
                type: &#x27;textbox&#x27;,
                name: &quot;value&quot;,
                value: Number(taxState),
                placeholder: &quot;Enter Tax Or Fee Value&quot;,
                class: &quot;col-4&quot;,
                format: &#x27;normal&#x27;,
                required: true,
                keyFilter: &#x27;int&#x27;
              },
              {
                type: &#x27;dropdown&#x27;,
                name: &#x27;mode&#x27;,
                placeholder: &#x27;Select Calculation Mode&#x27;,
                value: &#x27;%&#x27;,
                data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type } }),
                required: true,
                class: &#x27;col-3&#x27;
              },
            ]
          } as any);
        }
      }
    }

    // prepare form from array
    this.arrCarForm.forEach((section: any) &#x3D;&gt; {
      const sectionValue &#x3D; this.commonService.replaceStringToLowercase(section.value);
      this.formCar?.addControl(sectionValue, this.formBuilder.group({}));
      section.data.forEach((element: any, index: number) &#x3D;&gt; {
        if (element.type &#x3D;&#x3D;&#x3D; &#x27;selection&#x27;) {
          const group &#x3D; this.formBuilder.group({
            type: new FormControl(element.element.find((element: any) &#x3D;&gt; element.name &#x3D;&#x3D;&#x3D; &#x27;type&#x27;).value ?? null, [Validators.required]),
            value: new FormControl(element.element.find((element: any) &#x3D;&gt; element.name &#x3D;&#x3D;&#x3D; &#x27;value&#x27;).value ?? null, [Validators.required]),
            mode: new FormControl(element.element.find((element: any) &#x3D;&gt; element.name &#x3D;&#x3D;&#x3D; &#x27;mode&#x27;).value ?? null, [Validators.required])
          });
          (this.formCar?.get(sectionValue) as FormGroup).addControl(index.toString(), group);
        } else {
          if (sectionValue &#x3D;&#x3D;&#x3D; &#x27;media&#x27; &amp;&amp; element.type &#x3D;&#x3D;&#x3D; &#x27;upload&#x27;) {
            this.arrCarMedia.push({ field: element.name, value: [] });
            this.arrCarMediaCopy.push({ field: element.name, value: [] });
          }
          if (element.required) {
            (this.formCar?.get(sectionValue) as FormGroup).addControl(element.name, this.formBuilder.control(element.value ?? undefined, [Validators.required]));
            if (element.pattern) {
              (this.formCar?.get(sectionValue) as FormGroup).get(element.name)?.addValidators(Validators.pattern(element.pattern.label));
            }
          } else {
            (this.formCar?.get(sectionValue) as FormGroup).addControl(element.name, this.formBuilder.control(undefined));
          }
        }
      });
    })

    // if car for update
    this.loaderService.setLoading(true);
    this.activatedRoute.queryParams.subscribe(async (params) &#x3D;&gt; {
      if (params[&#x27;id&#x27;]) {
        // false vin dialog because edit record already done
        this.isVinDecodingDialogOpen &#x3D; false;
        try {
          const dataCar: any &#x3D; await this.httpService.get(&#x27;car/&#x27; + params[&#x27;id&#x27;]);
          if (!dataCar) {
            this.messageService.add({ severity: &#x27;secondary&#x27;, summary: &#x27;Missing&#x27;, detail: &#x27;No Car Found!&#x27; });
            return
          }
          this.strEditId &#x3D; params[&#x27;id&#x27;];
          this.strFormButtonTitle &#x3D; &quot;Update Car&quot;;

          // arr Listing status
          this.formCar.patchValue({
            introduction: {
              category: dataCar.category,
              make: dataCar.make,
              model: dataCar.model,
              year: dataCar.year,
              vin_number: dataCar.vin_number,
              stock_number: dataCar.stock_number,
              // store: dataCar.store
            },
            taxes_fees: {},
            price_status: {
              &quot;condition&quot;: dataCar.condition,
              &quot;status&quot;: dataCar.status,
              &quot;publish_to&quot;: dataCar.publish_to,
              &quot;asking_price&quot;: dataCar.asking_price,
              &quot;sales_price&quot;: dataCar.sales_price,
              &quot;msrp&quot;: dataCar.msrp,
              &quot;invoice_price&quot;: dataCar.invoice_price,
              &quot;retail_price&quot;: dataCar.retail_price,
              &quot;wholesale_price&quot;: dataCar.wholesale_price,
              &quot;description&quot;: dataCar.description,
              &quot;warrenty_description&quot;: dataCar.warrenty_description,
              &quot;odometer&quot;: dataCar.odometer,
              &quot;in_stock_date&quot;: dataCar.in_stock_date,
              &quot;carafax&quot;: dataCar.carafax
            },
            specifications: {
              &quot;color&quot;: dataCar.color,
              &quot;transmission&quot;: dataCar.transmission,
              &quot;body_type&quot;: dataCar.body_type,
              &quot;exterior_color&quot;: dataCar.exterior_color,
              &quot;drivetrain&quot;: dataCar.drivetrain,
              &quot;fuel_type&quot;: dataCar.fuel_type,
              &quot;engine&quot;: dataCar.engine,
              &quot;seating_capacity&quot;: dataCar.seating_capacity,
              &quot;doors&quot;: dataCar.doors,
              &quot;trim&quot;: dataCar.trim,
              &quot;features&quot;: dataCar.features,
              &quot;home_services&quot;: dataCar.home_services
            },
            window_sticker: dataCar.window_sticker
          });

          // add dynamic taxes
          if (dataCar.taxes_fees.length &gt; 0) {
            // this.formCar.value.taxes_fees &#x3D; {};
            this.arrCarForm!.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)!.data &#x3D; [];
            dataCar.taxes_fees.forEach((element: any, index: number) &#x3D;&gt; {
              const group &#x3D; this.formBuilder.group({
                type: new FormControl(element.type, [Validators.required]),
                value: new FormControl(element.value, [Validators.required]),
                mode: new FormControl(element.mode, [Validators.required])
              });
              (this.formCar?.get(&#x27;taxes_fees&#x27;) as FormGroup).addControl(index.toString(), group);
              this.arrCarForm!.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)?.data.push({
                type: &#x27;selection&#x27;,
                class: &quot;col-12&quot;,
                removed: element.type !&#x3D;&#x3D; &#x27;HST&#x27;,
                element: [
                  {
                    type: &#x27;textbox&#x27;,
                    name: &quot;type&quot;,
                    value: element.type,
                    placeholder: &quot;Enter Tax Or Fee Type&quot;,
                    class: &quot;col-4&quot;,
                    format: &#x27;normal&#x27;,
                    required: true,
                    readonly: element.type &#x3D;&#x3D;&#x3D; &#x27;HST&#x27;
                  },
                  {
                    type: &#x27;textbox&#x27;,
                    name: &quot;value&quot;,
                    value: Number(element.value),
                    placeholder: &quot;Enter Tax Or Fee Value&quot;,
                    class: &quot;col-4&quot;,
                    format: &#x27;normal&#x27;,
                    required: true,
                    keyFilter: &#x27;int&#x27;
                  },
                  {
                    type: &#x27;dropdown&#x27;,
                    name: &#x27;mode&#x27;,
                    placeholder: &#x27;Select Calculation Mode&#x27;,
                    value: element.mode,
                    data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type } }),
                    required: true,
                    class: &#x27;col-3&#x27;
                  },
                ]
              } as any);
            });
          }

          // add images
          dataCar.images.sort((a: any, b: any) &#x3D;&gt; a.position - b.position ? 1 : -1).map(async (element: any) &#x3D;&gt; {
            const response &#x3D; await fetch(element.url, { cache: &#x27;no-cache&#x27; });
            const data &#x3D; await response.blob();
            const file &#x3D; new File([data], element.name, { type: data.type });
            this.arrCarMedia.find((media: any) &#x3D;&gt; element.field &#x3D;&#x3D;&#x3D; media.field).value.push({ file, mode: &#x27;add&#x27;, uploaded: true, path: element.path, name: element.name, position: element.position, previewUrl: element.url });
            this.arrCarMediaCopy.find((media: any) &#x3D;&gt; element.field &#x3D;&#x3D;&#x3D; media.field).value.push({ file, mode: &#x27;add&#x27;, uploaded: true, path: element.path, name: element.name, position: element.position, previewUrl: element.url });
          });
          (this.formCar?.get(this.commonService.replaceStringToLowercase(&#x27;media.images&#x27;)) as FormControl).removeValidators(Validators.required);
          (this.formCar?.get(this.commonService.replaceStringToLowercase(&#x27;media.images&#x27;)) as FormControl).updateValueAndValidity();

          // add videos if it&#x27;s available
          if (dataCar.videos.length &gt; 0) {
            dataCar.videos.sort((a: any, b: any) &#x3D;&gt; a.position - b.position).map(async (element: any) &#x3D;&gt; {
              const response &#x3D; await fetch(element.url);
              const data &#x3D; await response.blob();
              const file &#x3D; new File([data], element.name, { type: data.type });
              this.arrCarMedia.find((media: any) &#x3D;&gt; element.field &#x3D;&#x3D;&#x3D; media.field).value.push({ file, mode: &#x27;add&#x27;, uploaded: true, path: element.path, name: element.name, position: element.position, previewUrl: element.url });
              this.arrCarMediaCopy.find((media: any) &#x3D;&gt; element.field &#x3D;&#x3D;&#x3D; media.field).value.push({ file, mode: &#x27;add&#x27;, uploaded: true, path: element.path, name: element.name, position: element.position, previewUrl: element.url });
            });
          }

          this.router.navigate([], { queryParams: null });
        } catch (error: any) {
          this.messageService.add({ severity: &#x27;secondary&#x27;, summary: &#x27;Missing&#x27;, detail: error });
          this.router.navigate([&#x27;/car-list&#x27;]);
        }
      }
    });

    // copy car form 
    this.arrCarFormCopy &#x3D; JSON.parse(JSON.stringify(this.arrCarForm));

    this.loaderService.setLoading(false);
  }

  /**
 * Checks and manages the dependency of form elements.
 * This function handles enabling/disabling of dependent elements and sets up change listeners for parent elements.
 *
 * @param element - The form element to check for dependencies
 * @param section - The section of the form where the element is located
 * @returns A boolean indicating whether the element should be disabled due to dependency
 */
  checkElementDepend(element: CommonElement, section: string) {
    // check element has dependant then set child dependant value&#x27;s in parent
    if (element.dependant) {
      if (this.strEditId || (this.arrVinInfo &amp;&amp; this.arrVinInfo.length &gt; 0)) {
        // enable current element due to depenant
        this.formCar.get(&#x60;${section}.${element.name}&#x60;)?.enable();
      } else {
        // disable current element due to depenant
        this.formCar.get(&#x60;${section}.${element.name}&#x60;)?.disable();
      }

      // find dependant field in whole car form array because some dependent field is include in different section
      this.arrCarForm!.forEach((section: any) &#x3D;&gt; {
        section.data.forEach((main: any) &#x3D;&gt; {
          if (main.name !&#x3D;&#x3D; element.dependant_field) return
          main.onChange &#x3D; true;
          main.changeField &#x3D; element.name;
          return
        });
      });
    }

    // return depenant toggle value&#x27;s
    return this.strEditId || (this.arrVinInfo &amp;&amp; this.arrVinInfo.length &gt; 0) ? false : element.dependant;
  }

  /**
 * Modifies dependent form elements based on the selection of a parent element.
 * This function updates the options available in child elements when a parent element&#x27;s value changes.
 * It also enables previously disabled child fields.
 *
 * @param elementValue - The selected value of the parent element
 * @param data - An object containing information about the change event, including the field to be updated
 * @returns void
 */
  checkAndModifyDependantElementMovement(elementValue: string, data: any) {

    // find section and sub option dynamically
    this.arrCarForm?.forEach((section: any, index: number) &#x3D;&gt; {
      section.data.forEach((main: any) &#x3D;&gt; {
        if (main.name &#x3D;&#x3D;&#x3D; data.changeField) {
          // find child data from copied data
          const arrData &#x3D; this.arrCarFormCopy![index].data.find((element: any) &#x3D;&gt; element.name &#x3D;&#x3D;&#x3D; data.changeField)?.data.filter((element: any) &#x3D;&gt; {
            return element.join &#x3D;&#x3D;&#x3D; elementValue;
          });

          // if no data found then push &#x27;Unknown&#x27; in data array
          if (!arrData || arrData.length &#x3D;&#x3D;&#x3D; 0 || !arrData.find(key &#x3D;&gt; key.value &#x3D;&#x3D;&#x3D; &#x27;unknown&#x27;)) {
            arrData?.push({ label: &#x27;Unknown&#x27;, value: &#x27;unknown&#x27; });
          }

          // set data as per parent element selection
          main.data &#x3D; arrData;
          main.dependant &#x3D; false;

          // enable child field
          this.formCar.get(&#x60;${section.value}.${data.changeField}&#x60;)?.enable();
        }
      });
    });
  }

  /**
   * Generates a form control name for validation purposes by combining the section value and element name.
   * 
   * @param section - An object representing a form section, which should contain a &#x27;value&#x27; property.
   * @param element - An object representing a form element, which should contain a &#x27;name&#x27; property.
   * @returns A string that represents the full form control name, formatted as &#x27;lowercaseSectionValue.elementName&#x27;.
   */
  getFormNameForValidation(section: any, element: any): string {
    return &#x60;${this.commonService.replaceStringToLowercase(section.value)}.${element.name}&#x60;;
  }

  /**
   * Finds and sorts media elements from the car media array based on the given element name.
   * 
   * @param element - An object containing the &#x27;name&#x27; property to match against media fields.
   * @returns An array of sorted media elements if found, or null if no matching media is found.
   *          The returned array is sorted by the &#x27;position&#x27; field in ascending numerical order.
   */
  findMediaFromArrCarMedia(element: any) {
    const media &#x3D; this.arrCarMedia.find((media: any) &#x3D;&gt; media.field &#x3D;&#x3D;&#x3D; element.name);
    return media ? this.commonService.sortArrayField(media.value, &#x27;position&#x27;, &#x27;number&#x27;) : null;
  }

  /**
 * Adds or updates a car listing based on the current form state.
 * This function handles both new car additions and updates to existing listings.
 * It processes form data, manages media uploads, and interacts with the backend API.
 * 
 * The function performs the following main tasks:
 * 1. Prepares the API object from form data
 * 2. Validates critical fields like Carfax URL
 * 3. Determines the seller type (dealer or private person)
 * 4. Handles media uploads to AWS S3
 * 5. Creates or updates the car listing in the database
 * 6. Manages associated media (images, videos) for the listing
 * 7. Provides user feedback through message service
 * 
 * @async
 * @returns {Promise&lt;void&gt;} A promise that resolves when the car addition or update process is complete
 * @throws Will throw an error if the API calls fail, which is caught and displayed to the user
 */
  async addCar(): Promise&lt;void&gt; {
    // display loader
    this.loaderService.setLoading(true);

    // prepare all nested object in finalize obj
    let apiObj &#x3D; { ...this.formCar.value.introduction, ...this.formCar.value.specifications, ...this.formCar.value.price_status, video_url: this.formCar.value.media.video_url }

    // check window sticker all object is null - if yes then remove from final object, otherwise add
    const isEmpty &#x3D; Object.values(this.formCar.value.window_sticker).every(x &#x3D;&gt; x &#x3D;&#x3D;&#x3D; null || x &#x3D;&#x3D;&#x3D; &#x27;&#x27;);
    // if not null then add in response  
    if (!isEmpty) {
      apiObj &#x3D; { ...apiObj, window_sticker: this.formCar.value.window_sticker }
    }

    if (apiObj.carafax &amp;&amp; !String(apiObj.carafax).includes(&#x27;carfax.ca&#x27;)) {
      this.messageService.add({ severity: &#x27;error&#x27;, summary: &#x27;Fail&#x27;, detail: &#x27;Carafax URL must be valid&#x27; });
      return
    }

    if (this.localStorageService.userIsDealer()) {
      apiObj.store &#x3D; this.localStorageService.get(&#x27;store&#x27;);
      apiObj.seller_type &#x3D; &#x27;dealer&#x27;;

    } else {
      apiObj.user &#x3D; this.localStorageService.getObject(&#x27;user&#x27;).identifier;
      apiObj.seller_type &#x3D; &#x27;private_person&#x27;;
    }

    if (this.strFormButtonTitle &#x3D;&#x3D;&#x3D; &#x27;Add Car&#x27;) {
      // set custom media empty array
      apiObj.images &#x3D; [];
      apiObj.videos &#x3D; [];

      // add user if listing role is person
      if (!this.localStorageService.userIsDealer()) {
        apiObj.user &#x3D; this.localStorageService.getObject(&#x27;user&#x27;).identifier;
      }

      // add taxes &amp; fees by array
      apiObj.taxes_fees &#x3D; Object.keys(this.formCar.value.taxes_fees).map((key: string) &#x3D;&gt; {
        return this.formCar.value.taxes_fees[key];
      });

      // send request to add data
      await this.httpService.post(&#x27;car&#x27;, apiObj).then(async (response: any) &#x3D;&gt; {

        // display loader - because of aws api, it&#x27;s auto remove, so set again till data added to db
        this.loaderService.setLoading(true);

        // wait till all media uploaded
        await Promise.allSettled(this.arrCarMedia.map(async (mediaType: any) &#x3D;&gt; {
          // Logic to consume a single message
          const mediaResult &#x3D; await Promise.allSettled(mediaType.value.map(async (media: any) &#x3D;&gt; {

            // set default type of media
            const type &#x3D; mediaType.field &#x3D;&#x3D;&#x3D; &#x27;images&#x27; ? &#x27;i&#x27; : mediaType.field &#x3D;&#x3D;&#x3D; &#x27;videos&#x27; ? &#x27;v&#x27; : &#x27;u&#x27;;

            // convert crop 64 base image to file
            const file &#x3D; base64ToFile(media.previewUrl);
            // send request for upload url to aws s3
            const urlUploadResult: any &#x3D; await this.httpService.get(&#x60;car/get-url/${file.type.split(&#x27;/&#x27;)[1]}/${type}&#x60;);
            // send object to aws by pre-signed url
            await this.httpService.putURL(urlUploadResult.data.url, file, file.type);

            const objDB &#x3D; {
              field: mediaType.field, mode: media.mode, media: {
                url: urlUploadResult.data.fullPath,
                name: urlUploadResult.data.mediaName,
                path: urlUploadResult.data.path,
                field: mediaType.field,
                position: media.position,
                date: new Date()
              }
            };

            // add media in db
            await this.httpService.post(&#x60;car/media/${response.id}&#x60;, objDB);

            // return result for verification
            return urlUploadResult;
          }));
          return mediaResult;
        }));

        // result.forEach((result, index) &#x3D;&gt; {
        //   if (result.status &#x3D;&#x3D;&#x3D; &#x27;fulfilled&#x27;) {
        //     // Process successful result
        //     console.log(&#x60;Media ${index} processed successfully: ${result.value}&#x60;);
        //   } else {
        //     // Handle error
        //     console.error(&#x60;Error processing message ${index}: ${result.reason}&#x60;);
        //   }
        // });

        this.messageService.add({ severity: &#x27;secondary&#x27;, summary: &#x27;Success&#x27;, detail: &#x27;Car Will Added Soon, It will be displayed once it added in your list!&#x27;, life: 5000 });
        this.resetFormData();
        // remove loader
        this.loaderService.setLoading(false);
        this.router.navigateByUrl(&#x27;/user/car-list&#x27;);
      }).catch((error: HttpErrorResponse) &#x3D;&gt; {
        this.messageService.add({ severity: &#x27;error&#x27;, summary: &#x27;Fail&#x27;, detail: this.commonService.replaceStringToCapitalize(error) });
      })
    } else {
      let tempObj &#x3D; { ...this.formCar.value.introduction, ...this.formCar.value.specifications, ...this.formCar.value.price_status, video_url: this.formCar.value.media.video_url }
      if (!isEmpty) {
        tempObj &#x3D; { ...tempObj, window_sticker: this.formCar.value.window_sticker }
      }

      // add taxes
      tempObj.taxes_fees &#x3D; Object.keys(this.formCar.value.taxes_fees).map((key: string) &#x3D;&gt; {
        return this.formCar.value.taxes_fees[key];
      });

      await this.httpService.patch(&#x60;car/${this.strEditId}&#x60;, tempObj).then(async (response: any) &#x3D;&gt; {

        // display loader - because of aws api, it&#x27;s auto remove, so set again till data added to db
        this.loaderService.setLoading(true);

        // check position is updated or not
        await Promise.all([this.arrCarMediaCopy.forEach(async (element: any) &#x3D;&gt; {
          if (element.value &amp;&amp; element.value.length &gt; 0) {
            element.value.forEach(async (media: any) &#x3D;&gt; {
              if (media.name &amp;&amp; media.mode !&#x3D;&#x3D; &#x27;delete&#x27;) {
                const newMedia &#x3D; this.findMediaFromArrCarMedia({ name: element.field }).find((oldmedia: any) &#x3D;&gt; oldmedia.name &#x3D;&#x3D;&#x3D; media.name);
                if (newMedia.position !&#x3D;&#x3D; media.position) {
                  await this.httpService.patch(&#x27;car/media&#x27;, { _id: this.strEditId, field: element.field, position: newMedia.position, name: newMedia.name });
                }
              }
            });
          }
        })]);

        // wait till all media uploaded
        await Promise.allSettled(this.arrCarMedia.map(async (mediaType: any) &#x3D;&gt; {
          return await Promise.allSettled(mediaType.value.map(async (media: any) &#x3D;&gt; {
            if (!media.uploaded &amp;&amp; media.mode &#x3D;&#x3D;&#x3D; &#x27;add&#x27;) {
              // set default type of media
              const type &#x3D; mediaType.field &#x3D;&#x3D;&#x3D; &#x27;images&#x27; ? &#x27;i&#x27; : mediaType.field &#x3D;&#x3D;&#x3D; &#x27;videos&#x27; ? &#x27;v&#x27; : &#x27;u&#x27;;

              // large image
              // convert crop 64 base image to file
              const file &#x3D; base64ToFile(media.previewUrl);
              // send request for upload url to aws s3
              const urlUploadResult: any &#x3D; await this.httpService.get(&#x60;car/get-url/${file.type.split(&#x27;/&#x27;)[1]}/${type}&#x60;);
              // send object to aws by pre-signed url
              await this.httpService.putURL(urlUploadResult.data.url, file, file.type);

              const objDB &#x3D; {
                field: mediaType.field, mode: media.mode, media: {
                  url: urlUploadResult.data.fullPath,
                  name: urlUploadResult.data.mediaName,
                  path: urlUploadResult.data.path,
                  field: mediaType.field,
                  position: media.position,
                  date: new Date()
                }
              };

              await this.httpService.post(&#x60;car/media/${response.stock_number}&#x60;, objDB);

              // return result for verification
              return urlUploadResult;
            }
            if (media.uploaded &amp;&amp; media.mode &#x3D;&#x3D;&#x3D; &#x27;delete&#x27;) {
              const objDB &#x3D; {
                field: mediaType.field,
                mode: media.mode,
                media: {
                  url: media.path + media.name,
                  path: media.path,
                  field: mediaType.field,
                  name: media.name,
                  position: media.position, date: new Date()
                }
              };
              await this.httpService.post(&#x60;car/media/${this.strEditId}&#x60;, objDB);
              // return result for verification
              return objDB;
            }
          }));
        }));

        this.messageService.add({ severity: &#x27;secondary&#x27;, summary: &#x27;Success&#x27;, detail: &#x27;Car Advertisement Updated Successfully, It will take sometime to reflect the changes!&#x27; });
        this.resetFormData();
        this.router.navigateByUrl(&#x27;/user/car-list&#x27;);
      }).catch((error: HttpErrorResponse) &#x3D;&gt; {
        this.messageService.add({ severity: &#x27;error&#x27;, summary: &#x27;Fail&#x27;, detail: this.commonService.replaceStringToCapitalize(error) });
      })
    }
  }

  /**
 * Resets the form data and reinitializes various form-related properties.
 * This function performs the following tasks:
 * - Closes the VIN decoding dialog if open
 * - Resets the car form with default values
 * - Clears all images and videos from the form
 * - Removes and re-adds tax and fees controls
 * - Sets up HST and interest rate taxes based on user type and store details
 * - Resets edit-related properties
 * - Prepares the form array for media uploads
 *
 * @async
 * @returns {Promise&lt;void&gt;} A promise that resolves when all reset operations are complete
 */
  async resetFormData(): Promise&lt;void&gt; {
    // if user decline vin response then close vin dialog if it&#x27;s open
    if (this.formVinDecode.value.number) {
      this.isVinDecodingDialogOpen &#x3D; false;
    }

    // reset form
    this.formCar.reset({
      introduction: {
        category: &#x27;car&#x27;
      },
      price_status: {
        status: &#x27;live&#x27;,
        condition: &#x27;new&#x27;,
        publish_to: &#x27;euro_exoti_car&#x27;
      },
    });

    // remove all images &amp; videos from form
    this.arrCarMedia &#x3D; [];

    // remove all tax and fees from form
    this.formCar?.removeControl(&#x27;taxes_fees&#x27;);
    this.formCar.updateValueAndValidity();

    // add new tax &amp; fees group to form
    this.formCar.addControl(&#x27;taxes_fees&#x27;, this.formBuilder.group({}));

    // reset tax &amp; fees
    this.arrCarForm!.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)!.data &#x3D; [];

    // check user type
    const isUserDealer &#x3D; this.localStorageService.userIsDealer();

    // set hst &amp; intrest rate tax by user identity
    const StoreDetail: any &#x3D; await this.httpService.get(&#x60;store/${this.localStorageService.get(&#x27;store&#x27;)}&#x60;);
    const csv: any &#x3D; await this.httpService.getWithOutsideURLCSV(&#x27;assets/csv/rate-table.csv&#x27;);
    const taxState: any &#x3D; this.csvService.CSVToJSON(csv).find((element: any) &#x3D;&gt; element.JRSD_CD &#x3D;&#x3D;&#x3D; StoreDetail.address.state).VPR1_HST;
    const arrTempTax &#x3D; [];
    if (taxState) {
      arrTempTax.push({
        type: &#x27;HST&#x27;,
        value: Number(taxState),
        mode: &#x27;%&#x27;
      });
    }
    if (isUserDealer &amp;&amp; StoreDetail?.finance_apr) {
      arrTempTax.push({
        type: &#x27;Interest Rate&#x27;,
        value: Number(StoreDetail.finance_apr),
        mode: &#x27;%&#x27;
      });
    }
    // set value in form
    arrTempTax.forEach((tax: any, index: number) &#x3D;&gt; {
      const group &#x3D; this.formBuilder.group({
        type: new FormControl(tax.type, [Validators.required]),
        value: new FormControl(tax.value, [Validators.required]),
        mode: new FormControl(tax.mode, [Validators.required])
      });

      (this.formCar?.get(&#x27;taxes_fees&#x27;) as FormGroup).addControl(index.toString(), group);

      this.arrCarForm!.find((section: any) &#x3D;&gt; section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;)?.data.push({
        type: &#x27;selection&#x27;,
        class: &quot;col-12&quot;,
        removed: tax.type !&#x3D;&#x3D; &#x27;HST&#x27;,
        element: [
          {
            type: &#x27;textbox&#x27;,
            name: &quot;type&quot;,
            value: tax.type,
            readonly: true,
            placeholder: &quot;Enter Tax Or Fee Type&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: true,
          },
          {
            type: &#x27;textbox&#x27;,
            name: &quot;value&quot;,
            value: tax.value,
            placeholder: &quot;Enter Tax Or Fee Value&quot;,
            class: &quot;col-4&quot;,
            format: &#x27;normal&#x27;,
            required: true,
            keyFilter: &#x27;int&#x27;
          },
          {
            type: &#x27;dropdown&#x27;,
            name: &#x27;mode&#x27;,
            placeholder: &#x27;Select Calculation Mode&#x27;,
            value: tax.mode,
            data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type } }),
            required: true,
            class: &#x27;col-3&#x27;
          },
        ]
      } as any);
    });

    // make edit id reset if it&#x27;s for edit
    this.strEditId &#x3D; undefined;

    // reset formbutton title
    this.strFormButtonTitle &#x3D; &quot;Add Car&quot;;

    // prepare form from array
    this.arrCarForm!.forEach((section: any) &#x3D;&gt; {
      const sectionValue &#x3D; this.commonService.replaceStringToLowercase(section.value);
      section.data.forEach((element: any) &#x3D;&gt; {
        if (sectionValue &#x3D;&#x3D;&#x3D; &#x27;media&#x27; &amp;&amp; element.type &#x3D;&#x3D;&#x3D; &#x27;upload&#x27;) {
          this.arrCarMedia.push({ type: element.name, value: [] });
        }
      });
    })
  }

  /**
 * Deletes a fees or taxes dynamic form group from the specified parent form group.
 *
 * @param parent - The name of the parent form group from which the group will be deleted.
 * @param index - The index of the group to be deleted within the parent form group.
 *
 * This function removes the specified group from the parent form group,
 * and also updates the corresponding data array in the &#x60;arrCarForm&#x60; array to reflect the deletion.
 *
 * @returns {void}
 */
  onDeleteTaxesAndFees(parent: string, index: number): void {
    delete this.formCar.value[parent][index];
    this.arrCarForm?.find((element: any) &#x3D;&gt; element.value &#x3D;&#x3D;&#x3D; parent)!.data.splice(index, 1)
  }

  /**
 * Adds a new fees or taxes dynamic form group to the specified parent form group.
 *
 * @param parent - The name of the parent form group to which the new group will be added.
 *
 * This function creates a new form group with three form controls: &#x27;type&#x27;, &#x27;value&#x27;, and &#x27;mode&#x27;.
 * It then adds this new group to the specified parent form group.
 * It also updates the corresponding data array in the &#x60;arrCarForm&#x60; array to reflect the addition of the new fees or taxes.
 */
  onAddTaxesAndFees(parent: string) {
    const group &#x3D; this.formBuilder.group({
      type: new FormControl(null, [Validators.required]),
      value: new FormControl(null, [Validators.required]),
      mode: new FormControl(null, [Validators.required])
    });

    // set index key in form
    const keyMax &#x3D; Object.keys(this.formCar.value[parent]).map(x &#x3D;&gt; { return Number(x) });
    (this.formCar?.get(parent) as FormGroup).addControl((Math.max(...keyMax) + 1).toString(), group);
    this.arrCarForm?.find((element: any) &#x3D;&gt; element.value &#x3D;&#x3D;&#x3D; parent)!.data.push({
      type: &#x27;selection&#x27;,
      class: &quot;col-12&quot;,
      removed: true,
      element: [
        {
          type: &#x27;textbox&#x27;,
          name: &quot;type&quot;,
          placeholder: &quot;Enter Tax Or Fee Type&quot;,
          class: &quot;col-4&quot;,
          format: &#x27;normal&#x27;,
          required: true,
        },
        {
          type: &#x27;textbox&#x27;,
          name: &quot;value&quot;,
          placeholder: &quot;Enter Tax Or Fee Value&quot;,
          class: &quot;col-4&quot;,
          format: &#x27;normal&#x27;,
          required: true,
          keyFilter: &#x27;int&#x27;
        },
        {
          type: &#x27;dropdown&#x27;,
          name: &#x27;mode&#x27;,
          placeholder: &#x27;Select Calculation Mode&#x27;,
          value: &#x27;%&#x27;,
          data: [&#x27;%&#x27;, &#x27;$&#x27;].map((type: string) &#x3D;&gt; { return { label: type, value: type }; }),
          required: true,
          class: &#x27;col-3&#x27;
        },
      ],
    } as any);
  }

  /**
   * Handles the file drop event for drag-and-drop file uploads.
   * This function delegates the file processing to the prepareFilesList method.
   * 
   * @param event - The drop event containing the files dropped by the user.
   * @param element - The DOM element or component where the files were dropped.
   * @param parent - The parent component or container of the drop target.
   * 
   * @returns {void}
   */
  onFileDropped(event: any, element: any, parent: any): void {
    this.prepareFilesList(event, element, parent);
  }

  /**
   * Handles the file browse event when files are selected through a file input.
   * This function delegates the file processing to the prepareFilesList method.
   * 
   * @param files - The FileList object containing the files selected by the user.
   * @param element - The DOM element or component associated with the file input.
   * @param parent - The parent component or container of the file input.
   * 
   * @returns {void}
   */
  fileBrowseHandler(files: any, element: any, parent: any): void {
    this.prepareFilesList(files, element, parent);
  }

  /**
 * Deletes a file from the car media array and updates form validation.
 * 
 * @param index - The index of the file to be deleted in the car media array.
 * @param element - The element object containing information about the file input field.
 * @param parent - The parent object containing information about the form section.
 * 
 * @returns {void}
 */
  deleteFile(index: any, element: any, parent: any): void {

    // if element uploaded then set mode delete from db - mostly use on edit time
    const media &#x3D; this.findMediaFromArrCarMedia(element)[index];
    if (media.uploaded) {
      media.mode &#x3D; &#x27;delete&#x27;;
    } else {
      // remove file from car media array
      this.findMediaFromArrCarMedia(element).splice(index, 1);
    }

    // if no file then make validation require
    const checkAddMediaExist &#x3D; this.findMediaFromArrCarMedia(element).some((element: any) &#x3D;&gt; element.mode &#x3D;&#x3D;&#x3D; &#x27;add&#x27;);
    if (!checkAddMediaExist &amp;&amp; element.required) {
      const control &#x3D; this.formCar?.get(this.commonService.replaceStringToLowercase(parent.value + &#x27;.&#x27; + element.name)) as FormControl;
      control.setValue(null);
      control.setValidators(Validators.required);
      control.updateValueAndValidity();
    }
  }

  // add Files list to element files list
  /**
   * Prepares and processes a list of files for upload, performing various checks and validations.
   * 
   * This function handles file type validation, duplicate file detection, file size checking,
   * and adds valid files to the car media array for future upload. It also generates preview URLs
   * for images and videos.
   *
   * @param {Array&lt;any&gt;} files - An array of file objects to be processed and prepared for upload.
   * @param {any} element - An object containing metadata about the upload field, including accepted file types and size limits.
   * @param {any} parent - An object representing the parent form or container of the upload field.
   * 
   * @returns {void} This function doesn&#x27;t return a value, but it updates the component&#x27;s state and form validations.
   */
  prepareFilesList(files: Array&lt;any&gt;, element: any, parent: any): void {

    // reset error 
    element.error &#x3D; undefined;

    // loop because possiblity of multiple file
    for (const item of files) {

      // check file type
      const acceptedFormat &#x3D; element.accept.split(&#x27;,&#x27;);
      if (!acceptedFormat.includes(item.type)) {
        element.error &#x3D; &quot;File type not supported&quot;;
        return
      }

      // check same name file are exist
      const isExist &#x3D; acceptedFormat.includes(item.name);
      if (isExist) {
        alert(&quot;You can not send two or more same name files.&quot;);
        return
      }

      // check file size error
      const fileSize &#x3D; item.size / 1024 / 1024; // in MiB
      if (fileSize.toFixed(2) &gt; element.maxSize) {
        element.error &#x3D; &#x27;File size exceeds 2 MiB; it should be less than 2 MB&#x27;;
        return
      }

      // set position by highter index number from car media array
      const currentMediaValues &#x3D; this.findMediaFromArrCarMedia(element).map((element: any) &#x3D;&gt; element.position);
      const position &#x3D; currentMediaValues.length &#x3D;&#x3D;&#x3D; 0 ? 1 : Math.max(...this.findMediaFromArrCarMedia(element).map((element: any) &#x3D;&gt; element.position)) + 1;

      // add in car media array to upload in future submit event
      this.findMediaFromArrCarMedia(element).push({ file: item, mode: &#x27;add&#x27;, field: element.name, uploaded: false, position, previewUrl: &#x27;&#x27; });

      // read image and set by base64 url for preview
      const reader &#x3D; new FileReader();
      reader.readAsDataURL(item);
      reader.onload &#x3D; async (e: any) &#x3D;&gt; {
        this.findMediaFromArrCarMedia(element).find((element: any) &#x3D;&gt; element.position &#x3D;&#x3D;&#x3D; position).previewUrl &#x3D; element.name &#x3D;&#x3D;&#x3D; &#x27;videos&#x27; ? e.target!.result : await this.compressImage(e.target!.result, 1024, 786);
      }
    }

    // check if file successfully set in uploader then remove validation manually for darg and drop
    if (files.length &gt; 0 &amp;&amp; element.required) {
      const control &#x3D;this.formCar?.get(this.commonService.replaceStringToLowercase(parent.value + &#x27;.&#x27; + element.name)) as FormControl;
      control.removeValidators(Validators.required);
      control.updateValueAndValidity();
    }
  }

  /**
   * Reads the contents of a file input and sets the source of an image element with the result.
   * 
   * @param input - The file input element or File object to read from.
   * @param id - The ID of the image element whose source will be set.
   * @param data - Additional data (not used in the current implementation).
   * @returns A Promise that resolves when the file is read, or undefined if there&#x27;s no input.
   */
  readURL(input: any, id: any, data: any) {
    if (input) {
      const reader &#x3D; new FileReader();
      reader.onload &#x3D; (e) &#x3D;&gt; {
        if (document.getElementById(id)) {
          (document.getElementById(id)! as any).src &#x3D; e.target!.result
        }
      };
      return reader.readAsDataURL(input);
    }
  }

  /**
 * Handles the selection of a feature in the car form.
 *
 * @param event - The event that triggered the function.
 * @param name - The name of the form control associated with the feature.
 * @param item - The item representing the selected feature.
 *
 * This function prevents the default and propagation of the event,
 * then retrieves the current value of the form control associated with the given name.
 * If the control&#x27;s value is empty or does not exist, it sets the control&#x27;s value to an array containing the selected item.
 * If the control&#x27;s value already contains the selected item, it removes the item from the array.
 * If the control&#x27;s value does not contain the selected item, it adds the item to the array.
 */
  onSelectFeature(event: any, name: string, item: any) {
    event.preventDefault();
    event.stopPropagation();
    const data &#x3D; this.formCar.get(name)?.value;
    if (!data || data.length &#x3D;&#x3D;&#x3D; 0) {
      this.formCar.get(name)?.setValue([item]);
    } else {
      const isExist &#x3D; data.find((element: any) &#x3D;&gt; element.value &#x3D;&#x3D;&#x3D; item.value);
      if (isExist) {
        this.formCar.get(name)?.setValue(data.filter((element: any) &#x3D;&gt; element.value !&#x3D;&#x3D; item.value));
      } else {
        this.formCar.get(name)?.setValue([...data, item]);
      }
    }
  }

  /**
   * Compresses an image to a specified size.
   * 
   * This function takes an image source and resizes it to the specified dimensions.
   * The compressed image is returned as a base64-encoded data URL.
   *
   * @param src - The source of the image. Can be a URL or a base64-encoded string.
   * @param newX - The desired width of the compressed image in pixels.
   * @param newY - The desired height of the compressed image in pixels.
   * @returns A Promise that resolves with the compressed image as a base64-encoded data URL.
   *          Rejects with an error if the image fails to load.
   */
  compressImage(src: any, newX: number, newY: number): Promise&lt;string&gt; {
    return new Promise((res, rej) &#x3D;&gt; {
      const img &#x3D; new Image();
      img.src &#x3D; src;
      img.crossOrigin &#x3D; &quot;anonymous&quot;;
      img.onload &#x3D; () &#x3D;&gt; {
        const elem &#x3D; document.createElement(&#x27;canvas&#x27;);
        elem.width &#x3D; newX;
        elem.height &#x3D; newY;
        const ctx &#x3D; elem.getContext(&#x27;2d&#x27;);
        ctx!.drawImage(img, 0, 0, newX, newY);
        const data &#x3D; ctx!.canvas.toDataURL();
        res(data);
      }
      img.onerror &#x3D; error &#x3D;&gt; rej(error);
    })
  }

  /**
   * Formats a given number of bytes into a human-readable string representation.
   * 
   * @param bytes - The number of bytes to format. Should be a positive number or zero.
   * @param decimals - The number of decimal places to include in the formatted output. 
   *                   If not provided or less than or equal to 0, it defaults to 0.
   *                   If provided and greater than 0, it defaults to 2.
   * @returns A string representing the formatted byte size with appropriate unit (e.g., &quot;1.5 MB&quot;).
   *          Returns &quot;0 Bytes&quot; if the input is 0.
   */
  formatBytes(bytes: any, decimals: any &#x3D; 0) {
    if (bytes &#x3D;&#x3D;&#x3D; 0) {
      return &#x27;0 Bytes&#x27;;
    }
    const k &#x3D; 1024;
    const dm &#x3D; decimals &lt;&#x3D; 0 ? 0 : decimals || 2;
    const sizes &#x3D; [&#x27;Bytes&#x27;, &#x27;KB&#x27;, &#x27;MB&#x27;, &#x27;GB&#x27;, &#x27;TB&#x27;, &#x27;PB&#x27;, &#x27;EB&#x27;, &#x27;ZB&#x27;, &#x27;YB&#x27;];
    const i &#x3D; Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + &#x27; &#x27; + sizes[i];
  }

  /**
   * Sets the cropped image in the media array and updates the preview URL.
   * If no event is provided, it triggers the cropping process.
   *
   * @param event - Optional. The ImageCroppedEvent containing the cropped image data.
   * @returns A Promise that resolves when the cropped image is set and compressed.
   */
  async setCropImage(event?: ImageCroppedEvent): Promise&lt;void&gt; {
    if (event) {
      const img &#x3D; this.findMediaFromArrCarMedia({ name: &#x27;images&#x27; }).find((element: any) &#x3D;&gt; element.position &#x3D;&#x3D;&#x3D; this.currentCropImageUrl.position);
      const reader &#x3D; new FileReader();
      reader.readAsDataURL(event.blob!);
      reader.onloadend &#x3D; function () {
        img.previewUrl &#x3D; reader.result;
      }

      img.previewUrl &#x3D; await this.compressImage(reader.result, 1024, 786);
    } else {
      this.cropperImage.crop();
    }
  }

  /**
   * Opens the image crop dialog and sets the current image for cropping.
   * 
   * This function prepares the selected image for cropping by setting the necessary
   * properties and opening the crop dialog.
   *
   * @param url - The URL or data URI of the image to be cropped.
   * @param position - The position of the image in the media array.
   * @param file - The File object representing the image.
   */
  showSelectedImageInCropDialog(url: string, position: number, file: File): void {
    this.isImageCropDialogOpen &#x3D; true;
    this.currentCropImageUrl.url &#x3D; url;
    this.currentCropImageUrl.position &#x3D; position;
    this.currentCropImageUrl.file &#x3D; file as any;
  }

  /**
   * Verifies the Vehicle Identification Number (VIN) and populates the form with decoded information.
   * 
   * This function sends a request to verify the VIN, and if successful, it updates various form fields
   * with the decoded vehicle information. It handles data formatting, performs dropdown updates,
   * and sets default values for missing information.
   * 
   * @async
   * @returns {Promise&lt;void&gt;} A promise that resolves when the VIN verification process is complete.
   * 
   * @throws {Error} If there&#x27;s an issue with the HTTP request or response processing.
   * 
   * @example
   * await this.verifyVIN();
   */
  async verifyVIN(): Promise&lt;void&gt; {
    const data &#x3D; this.formVinDecode.value;
    const decodeVIN: any &#x3D; await this.httpService.post(&#x27;car/verify-vin&#x27;, data);
    if (decodeVIN.success) {
      this.isVINVerified &#x3D; true;
      const data &#x3D; decodeVIN.data;
      this.arrVinInfo &#x3D; [];
      Object.keys(data).map((key: string) &#x3D;&gt; {
        if (data[key]) {
          if (key &#x3D;&#x3D;&#x3D; &#x27;vin_number&#x27;) return
          this.arrVinInfo.push({ label: this.commonService.replaceStringToCapitalize(key), value: key &#x3D;&#x3D;&#x3D; &#x27;engine&#x27; ? &#x60;${data[key]} Cylinder&#x60; : data[key] });
        }
      });

      const make &#x3D; data.make.toLowerCase().replaceAll(&#x27;-&#x27;, &#x27;_&#x27;);
      const model &#x3D; data.model.toLowerCase().replaceAll(&#x27;-&#x27;, &#x27;_&#x27;);
      let trim &#x3D; data.trim.toLowerCase().replaceAll(&#x27;-&#x27;, &#x27;_&#x27;);
      let engine &#x3D; data.engine &amp;&amp; !isNaN(+data.engine) ? &#x60;${data.engine}_cylinder&#x60; : data.engine ? data.engine.toLowerCase().replaceAll(&#x27;-&#x27;, &#x27;_&#x27;) : &#x27;unknown&#x27;;

      // make dropdown change value - show only make&#x27;s model in dropdown list
      this.checkAndModifyDependantElementMovement(make, { changeField: &#x27;model&#x27; });
      this.checkAndModifyDependantElementMovement(model, { changeField: &#x27;trim&#x27; });

      // find data from arrfilterform and set default if not find
      this.arrCarForm!.forEach((element: any) &#x3D;&gt; {
        if (element.value &#x3D;&#x3D;&#x3D; &#x27;specifications&#x27;) {
          // find trim and set default trim unknown
          const findTrim &#x3D; element.data.find((flt: any) &#x3D;&gt; flt.name &#x3D;&#x3D;&#x3D; &#x27;trim&#x27;).data.find((item: any) &#x3D;&gt; item.value &#x3D;&#x3D;&#x3D; trim);
          if (!findTrim) {
            trim &#x3D; &#x27;unknown&#x27;;
          }

          // find engine and set default engine unknown
          const findEngine &#x3D; element.data.find((flt: any) &#x3D;&gt; flt.name &#x3D;&#x3D;&#x3D; &#x27;engine&#x27;).data.find((item: any) &#x3D;&gt; item.value &#x3D;&#x3D;&#x3D; engine);
          if (!findEngine) {
            engine &#x3D; &#x27;unknown&#x27;;
          }
        }
      });

      this.formCar.patchValue({
        introduction: {
          make, model,
          year: Number(data.year),
          vin_number: data.vin_number.toUpperCase(),
        },
        specifications: {
          transmission: data.transmission.toLowerCase() ?? &#x27;unknown&#x27;,
          body_type: data.body_type.toLowerCase() ?? &#x27;unknown&#x27;,
          fuel_type: data.fuel_type.toLowerCase() ?? &#x27;unknown&#x27;,
          engine: engine ?? &#x27;unknown&#x27;,
          seating_capacity: data.seats ?? &#x27;unknown&#x27;,
          doors: data.doors ?? &#x27;unknown&#x27;,
          trim: trim ?? &#x27;unknown&#x27;,
        }
      });

      return;
    }
    this.messageService.add({ severity: &#x27;secondary&#x27;, summary: &#x27;VIN Number Not Found&#x27;, detail: &#x27;Kindly, Enter Details Manually!&#x27; });
  }

  /**
   * Closes the VIN verification dialog and resets related form and state variables.
   * 
   * This function performs the following actions:
   * 1. Closes the VIN decoding dialog by setting the flag to false.
   * 2. Resets the VIN decode form to its initial state.
   * 3. Sets the VIN verification status to false.
   * 
   * @returns {void}
   */
  closeVerifyVIN(): void {
    this.isVinDecodingDialogOpen &#x3D; false;
    this.formVinDecode.reset();
    this.isVINVerified &#x3D; false;
  }

  /**
   * Handles the event when a dragged item enters a new drop container.
   * This function sets up the drag and drop information and adjusts the placeholder element&#x27;s position.
   *
   * @param {CdkDragEnter&lt;any&gt;} event - The drag enter event object containing information about the drag operation.
   *                                    It includes details about the dragged item and the container it&#x27;s entering.
   *
   * @returns {void}
   *
   * @description
   * This function performs the following actions:
   * 1. Extracts drag and drop indices from the event.
   * 2. Updates the dragDropInfo property with these indices.
   * 3. Locates the placeholder element within the drop container.
   * 4. If a placeholder is found, it removes it from its current position and inserts it before the container.
   */
  dragEntered(event: CdkDragEnter&lt;any&gt;): void {
    const drag &#x3D; event.item;
    const dropList &#x3D; event.container;
    const dragIndex &#x3D; drag.data;
    const dropIndex &#x3D; dropList.data;
  
    this.dragDropInfo &#x3D; { dragIndex, dropIndex };
  
    const phContainer &#x3D; dropList.element.nativeElement;
    const phElement &#x3D; phContainer.querySelector(&#x27;.cdk-drag-placeholder&#x27;);
  
    if (phElement) {
      phContainer.removeChild(phElement);
      phContainer.parentElement?.insertBefore(phElement, phContainer);
    }
  }

  /**
   * Handles the drag movement event during a drag and drop operation.
   * This function updates the visual representation of the drag operation by
   * manipulating the placeholder and receiver elements.
   *
   * @param {CdkDragMove&lt;any&gt;} event - The drag move event object containing information about the current drag state.
   * 
   * @returns {void}
   * 
   * @description
   * This function performs the following actions:
   * 1. Checks if the necessary container and drag info are available.
   * 2. Locates the placeholder element within the drop list container.
   * 3. Determines the receiver element based on the drag direction.
   * 4. Hides the receiver element to create space for the dragged item.
   * 5. Stores the receiver element for later use in the drop operation.
   */
  dragMoved(event: CdkDragMove&lt;any&gt;): void {
    if (!this.dropListContainer || !this.dragDropInfo) return;
  
    const placeholderElement &#x3D;
      this.dropListContainer.nativeElement.querySelector(
        &#x27;.cdk-drag-placeholder&#x27;
      );
  
    const receiverElement &#x3D;
      this.dragDropInfo.dragIndex &gt; this.dragDropInfo.dropIndex
        ? placeholderElement?.nextElementSibling
        : placeholderElement?.previousElementSibling;
  
    if (!receiverElement) {
      return;
    }
  
    receiverElement.style.display &#x3D; &#x27;none&#x27;;
    this.dropListReceiverElement &#x3D; receiverElement;
  }

  /**
   * Handles the completion of a drag and drop operation for car media items.
   * This function updates the positions of the dragged items in the car media array
   * and resets the drag and drop related properties.
   *
   * @param {CdkDragDrop&lt;any&gt;} event - The drag and drop event object containing information about the completed drag operation.
   * @param {string} field - The field name identifying the specific media type being reordered (e.g., &#x27;images&#x27;, &#x27;videos&#x27;).
   * 
   * @returns {void}
   */
  dragDropped(event: CdkDragDrop&lt;any&gt;, field: string): void {
    if (!this.dropListReceiverElement) {
      return;
    }

    const drag &#x3D; event.item;
    const dropList &#x3D; event.container;
    const dragIndex &#x3D; drag.data;
    const dropIndex &#x3D; dropList.data;

    this.arrCarMedia.find((media: any) &#x3D;&gt; media.field &#x3D;&#x3D;&#x3D; field).value.forEach((element: any, index: number) &#x3D;&gt; {
      if (index &#x3D;&#x3D;&#x3D; dropIndex) {
        element.position &#x3D; dragIndex + 1;
      }
      if (index &#x3D;&#x3D;&#x3D; dragIndex) {
        element.position &#x3D; dropIndex + 1;
      }
    });

    this.dropListReceiverElement.style.removeProperty(&#x27;display&#x27;);
    this.dropListReceiverElement &#x3D; undefined;
    this.dragDropInfo &#x3D; undefined;
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">&lt;!-- header --&gt;
&lt;div class&#x3D;&quot;flex justify-content-between align-items-center mb-3&quot;&gt;
    &lt;div class&#x3D;&quot;flex align-items-center font-bold text-3xl text-primary-600&quot;&gt;
        &lt;div class&#x3D;&quot;pl-3&quot;&gt;
            Car
        &lt;/div&gt;
        &lt;i class&#x3D;&quot;pi pi-info-circle ml-2 flex align-items-center&quot; tooltipPosition&#x3D;&quot;bottom&quot; tooltipPosition&#x3D;&quot;right&quot;
            [pTooltip]&#x3D;&quot;headerTooltipContent&quot;&gt;
        &lt;/i&gt;
        &lt;ng-template #headerTooltipContent&gt;
            &lt;div class&#x3D;&quot;flex flex-column&quot;&gt;
                &lt;div class&#x3D;&quot;flex&quot;&gt;
                    &lt;i class&#x3D;&quot;pi pi-plus mr-2&quot;&gt;&lt;/i&gt;
                    &lt;div&gt;
                        &lt;b&gt;Add Car&lt;/b&gt;, Fill below form
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/ng-template&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;flex align-items-center gap-2&quot;&gt;
        &lt;p-button label&#x3D;&quot;Car List&quot; [routerLink]&#x3D;&quot;[&#x27;/user/car-list&#x27;]&quot; styleClass&#x3D;&quot;mr-2 button-secondary&quot; icon&#x3D;&quot;pi pi-bars&quot;
            size&#x3D;&quot;small&quot;&gt;&lt;/p-button&gt;
        &lt;p-button label&#x3D;&quot;Clear Car&quot; styleClass&#x3D;&quot;mr-2&quot; icon&#x3D;&quot;pi pi-eraser&quot; size&#x3D;&quot;small&quot; (onClick)&#x3D;&quot;resetFormData()&quot;
            severity&#x3D;&quot;danger&quot;&gt;&lt;/p-button&gt;
        &lt;p-button [label]&#x3D;&quot;strFormButtonTitle&quot; [icon]&#x3D;&quot;&#x27;pi pi-&#x27; + (strEditId ? &#x27;pencil&#x27; : &#x27;plus&#x27;)&quot; size&#x3D;&quot;small&quot;
            (onClick)&#x3D;&quot;addCar()&quot; [disabled]&#x3D;&quot;formCar.invalid&quot;&gt;&lt;/p-button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- body --&gt;
@defer (when (this.arrCarFormCopy?.length! &gt; 0)) {
&lt;form [formGroup]&#x3D;&quot;formCar&quot;&gt;
    &lt;div *ngFor&#x3D;&quot;let section of arrCarForm; let iS &#x3D; index&quot; [formGroupName]&#x3D;&quot;section.value&quot;&gt;
        &lt;p-panel [toggleable]&#x3D;&quot;true&quot; toggler&#x3D;&quot;header&quot; styleClass&#x3D;&quot;shadow-1 mb-3&quot; [header]&#x3D;&quot;section.name&quot;
            [collapsed]&#x3D;&quot;iS &#x3D;&#x3D;&#x3D; 3 ? false : true&quot;&gt;
            &lt;div class&#x3D;&quot;formgrid grid&quot;&gt;
                &lt;div class&#x3D;&quot;flex w-full align-items-center justify-content-end&quot;&gt;
                    &lt;p-button label&#x3D;&quot;Add Tax &amp; Fees&quot; icon&#x3D;&quot;pi pi-plus&quot; size&#x3D;&quot;small&quot; styleClass&#x3D;&quot;mb-3 mr-2&quot;
                        *ngIf&#x3D;&quot;section.value &#x3D;&#x3D;&#x3D; &#x27;taxes_fees&#x27;&quot; (onClick)&#x3D;&quot;onAddTaxesAndFees(section.value)&quot; /&gt;
                &lt;/div&gt;
                &lt;div [class]&#x3D;&quot;&#x27;field col-12 md:&#x27; + data.class&quot; [ngClass]&#x3D;&quot;{ &#x27;mb-0&#x27;: data.type &#x3D;&#x3D;&#x3D; &#x27;selection&#x27; }&quot;
                    *ngFor&#x3D;&quot;let data of section.data; let iD &#x3D; index&quot;&gt;
                    &lt;!-- dropdown --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;dropdown&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;
                        *ngIf&#x3D;&quot;data.name &#x3D;&#x3D;&#x3D; &#x27;store&#x27; &amp;&amp; !localStorageService.userIsDealer() ? false : true&quot;&gt;
                        &lt;p-dropdown [options]&#x3D;&quot;data.data&quot; [formControlName]&#x3D;&quot;data.name&quot; styleClass&#x3D;&quot;w-full&quot;
                            optionLabel&#x3D;&quot;label&quot; optionValue&#x3D;&quot;value&quot; [placeholder]&#x3D;&quot;data.placeholder&quot; [id]&#x3D;&quot;data.name&quot;
                            [inputId]&#x3D;&quot;data.name&quot; [filter]&#x3D;&quot;true&quot; [(ngModel)]&#x3D;&quot;data.value&quot;
                            (onChange)&#x3D;&quot;data.onChange ? checkAndModifyDependantElementMovement($event.value, data) : null&quot;
                            [readonly]&#x3D;&quot;checkElementDepend(data, section.value)&quot;&gt;&lt;/p-dropdown&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                    &lt;/span&gt;
                    }
                    &lt;!-- textbox --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;textbox&#x27;) {
                    @if(data.format &#x3D;&#x3D;&#x3D; &#x27;normal&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;&gt;
                        &lt;input pInputText ref-iD [formControlName]&#x3D;&quot;data.name&quot; [id]&#x3D;&quot;data.name&quot;
                            [pKeyFilter]&#x3D;&quot;data.keyFilter ? $any(data.keyFilter) : null&quot; [placeholder]&#x3D;&quot;data.placeholder&quot;
                            class&#x3D;&quot;w-full&quot; [readOnly]&#x3D;&quot;data.readonly&quot; /&gt;
                        &lt;label *ngIf&#x3D;&quot;!data.pattern&quot; [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                        &lt;label *ngIf&#x3D;&quot;data.pattern&quot; [for]&#x3D;&quot;data.name&quot;&gt;
                            {{data.placeholder}} - {{ iD.value ? iD.value.length : 0 }} / {{data.pattern!.value }}
                        &lt;/label&gt;
                    &lt;/span&gt;
                    }
                    @if (data.format &#x3D;&#x3D;&#x3D; &#x27;date&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;&gt;
                        &lt;p-calendar styleClass&#x3D;&quot;w-full&quot; [formControlName]&#x3D;&quot;data.name&quot; dateFormat&#x3D;&quot;dd/mm/yy&quot;
                            [placeholder]&#x3D;&quot;data.placeholder&quot; [showIcon]&#x3D;&quot;true&quot; [id]&#x3D;&quot;data.name&quot; [minDate]&#x3D;&quot;data.minDate&quot;
                            [dateFormat]&#x3D;&quot;data.dateFormat&quot;&gt;&lt;/p-calendar&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                    &lt;/span&gt;
                    }
                    @if(data.format &#x3D;&#x3D;&#x3D; &#x27;currency&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold p-input-icon-left w-full&quot;&gt;
                        &lt;i class&#x3D;&quot;pi pi-dollar&quot;&gt;&lt;/i&gt;
                        &lt;input type&#x3D;&quot;number&quot; pInputText [formControlName]&#x3D;&quot;data.name&quot;
                            [pKeyFilter]&#x3D;&quot;data.keyFilter ? $any(data.keyFilter) : null&quot; [placeholder]&#x3D;&quot;data.placeholder&quot;
                            class&#x3D;&quot;w-full&quot; [id]&#x3D;&quot;data.name&quot; /&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                    &lt;/span&gt;
                    }
                    @if(data.format &#x3D;&#x3D;&#x3D; &#x27;group&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;&gt;
                        &lt;p-inputGroup&gt;
                            &lt;p-inputGroupAddon *ngIf&#x3D;&quot;data.group_left&quot;&gt;{{ data.group_string }}&lt;/p-inputGroupAddon&gt;
                            &lt;input [type]&#x3D;&quot;data.datatype&quot; pInputText [formControlName]&#x3D;&quot;data.name&quot;
                                [placeholder]&#x3D;&quot;data.placeholder&quot; class&#x3D;&quot;w-full&quot;
                                [pKeyFilter]&#x3D;&quot;data.keyFilter ? $any(data.keyFilter) : null&quot; /&gt;
                            &lt;label class&#x3D;&quot;ml-3&quot; [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                            &lt;p-inputGroupAddon *ngIf&#x3D;&quot;data.group_right&quot;&gt;{{ data.group_string }}&lt;/p-inputGroupAddon&gt;
                        &lt;/p-inputGroup&gt;
                    &lt;/span&gt;
                    }
                    @if(data.format &#x3D;&#x3D;&#x3D; &#x27;number&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;&gt;
                        &lt;p-floatLabel&gt;
                            &lt;p-inputNumber [formControlName]&#x3D;&quot;data.name&quot; [inputId]&#x3D;&quot;data.name&quot; mode&#x3D;&quot;decimal&quot;
                                [maxFractionDigits]&#x3D;&quot;2&quot; styleClass&#x3D;&quot;w-full&quot; [placeholder]&#x3D;&quot;data.placeholder&quot;
                                [id]&#x3D;&quot;data.name&quot; inputStyleClass&#x3D;&quot;w-full&quot; [min]&#x3D;&quot;0&quot; /&gt;
                            &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{data.placeholder}}&lt;/label&gt;
                        &lt;/p-floatLabel&gt;
                    &lt;/span&gt;
                    }
                    }
                    &lt;!-- select-button --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;select-button&#x27;) {
                    &lt;div class&#x3D;&quot;flex mt-3&quot;&gt;
                        &lt;div class&#x3D;&quot;hidden lg:flex font-bold align-items-center&quot;&gt;
                            {{ commonService.replaceStringToCapitalize(data.name) + &#x27;:&#x27; }} &amp;nbsp;
                        &lt;/div&gt;
                        &lt;p-selectButton [options]&#x3D;&quot;data.data&quot; [formControlName]&#x3D;&quot;data.name&quot; optionLabel&#x3D;&quot;label&quot;
                            optionValue&#x3D;&quot;value&quot; [allowEmpty]&#x3D;&quot;false&quot;&gt;&lt;/p-selectButton&gt;
                    &lt;/div&gt;
                    }
                    &lt;!-- textarea --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;textarea&#x27;) {
                    &lt;textarea rows&#x3D;&quot;5&quot; [formControlName]&#x3D;&quot;data.name&quot; class&#x3D;&quot;w-full&quot; cols&#x3D;&quot;30&quot;
                        [placeholder]&#x3D;&quot;data.placeholder&quot; pInputTextarea&gt;&lt;/textarea&gt;
                    }
                    &lt;!-- editor --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;editor&#x27;) {
                    &lt;textarea rows&#x3D;&quot;10&quot; pInputTextarea [formControlName]&#x3D;&quot;data.name&quot; class&#x3D;&quot;w-full&quot;
                        [placeholder]&#x3D;&quot;data.placeholder&quot;&gt;&lt;/textarea&gt;
                    }
                    &lt;!-- uploader --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;upload&#x27;) {
                    &lt;!-- uploader title --&gt;
                    &lt;div class&#x3D;&quot;font-semibold text-md mb-1&quot;&gt;
                        {{ findMediaFromArrCarMedia(data) &amp;&amp; findMediaFromArrCarMedia(data).length ?
                        findMediaFromArrCarMedia(data).length + &#x27; Images&#x27; : &#x27;0 &#x27; +
                        commonService.replaceStringToCapitalize(data.name)}}
                    &lt;/div&gt;
                    &lt;!-- uploader container start --&gt;
                    &lt;div class&#x3D;&quot;file-container p-3&quot; appUploadFile (fileDropped)&#x3D;&quot;onFileDropped($event, data, section)&quot;&gt;
                        &lt;!-- file upload error --&gt;
                        &lt;div class&#x3D;&quot;flex w-full justify-content-center align-items-center bg-red-100 border-round-lg p-2&quot;
                            *ngIf&#x3D;&quot;data.error&quot;&gt;
                            &lt;small class&#x3D;&quot;form-validation-fail&quot;&gt; {{ data.error }} &lt;/small&gt;
                        &lt;/div&gt;
                        &lt;!-- file uploaded listing --&gt;
                        &lt;div #dropListContainer class&#x3D;&quot;flex flex-wrap gap-1 w-full file-list&quot; cdkDropListGroup
                            *ngIf&#x3D;&quot;findMediaFromArrCarMedia(data) &amp;&amp; findMediaFromArrCarMedia(data).length&quot;&gt;
                            &lt;div class&#x3D;&quot;flex p-2&quot; [cdkDropListData]&#x3D;&quot;i&quot;
                                *ngFor&#x3D;&quot;let item of findMediaFromArrCarMedia(data); let i &#x3D; index&quot; cdkDropList&gt;
                                &lt;div class&#x3D;&quot;relative shadow-2 bg-white&quot; cdkDrag (cdkDragMoved)&#x3D;&quot;dragMoved($event)&quot;
                                    [ngClass]&#x3D;&quot;{ &#x27;border-primary-500&#x27;: i &#x3D;&#x3D;&#x3D; 0 }&quot; [cdkDragData]&#x3D;&quot;i&quot;
                                    *ngIf&#x3D;&quot;item.mode !&#x3D;&#x3D; &#x27;delete&#x27;&quot; (cdkDragEntered)&#x3D;&quot;dragEntered($event)&quot;
                                    (cdkDragDropped)&#x3D;&quot;dragDropped($event, data.name)&quot;&gt;
                                    &lt;img *ngIf&#x3D;&quot;data.name &#x3D;&#x3D;&#x3D; &#x27;images&#x27; &amp;&amp; item.mode !&#x3D;&#x3D; &#x27;delete&#x27;&quot;
                                        class&#x3D;&quot;bg-contain bg-center bg-no-repeat w-full cursor-move surface-0&quot;
                                        [src]&#x3D;&quot;item.previewUrl&quot; [alt]&#x3D;&quot;i&quot;&gt;
                                    &lt;Video *ngIf&#x3D;&quot;data.name &#x3D;&#x3D;&#x3D; &#x27;videos&#x27;&quot; [src]&#x3D;&quot;item.previewUrl&quot; autoplay
                                        class&#x3D;&quot;bg-contain bg-center bg-no-repeat w-full cursor-move h-7rem&quot;&gt; &lt;/Video&gt;
                                    &lt;p-button icon&#x3D;&quot;pi pi-times&quot; severity&#x3D;&quot;danger&quot;
                                        styleClass&#x3D;&quot;absolute top-0 right-0 p-1 w-2rem border-noround&quot;
                                        (onClick)&#x3D;&quot;deleteFile(i, data, section)&quot;&gt;&lt;/p-button&gt;
                                    &lt;p-button icon&#x3D;&quot;pi pi-pencil&quot; *ngIf&#x3D;&quot;data.name &#x3D;&#x3D;&#x3D; &#x27;images&#x27; &amp;&amp; !item.uploaded&quot;
                                        styleClass&#x3D;&quot;absolute top-0 left-0 p-1 w-2rem border-noround&quot;
                                        (onClick)&#x3D;&quot;showSelectedImageInCropDialog(item.previewUrl, item.position, item.file)&quot;&gt;&lt;/p-button&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class&#x3D;&quot;container&quot;&gt;
                            &lt;input type&#x3D;&quot;file&quot; id&#x3D;&quot;fileDropRef&quot; [multiple]&#x3D;&quot;data.multiple&quot; [accept]&#x3D;&quot;data.accept&quot;
                                (change)&#x3D;&quot;fileBrowseHandler($any($event.target!).files, data, section)&quot;
                                [formControlName]&#x3D;&quot;data.name&quot; /&gt;
                            &lt;div class&#x3D;&quot;flex align-items-center&quot;&gt;
                                &lt;h5&gt;Drag and drop file here, or&lt;/h5&gt;
                                &lt;p-button for&#x3D;&quot;fileDropRef&quot; label&#x3D;&quot;Browse for files&quot; styleClass&#x3D;&quot;ml-2&quot;&gt;&lt;/p-button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;small *ngIf&#x3D;&quot;data.note&quot; class&#x3D;&quot;text-xs flex w-full justify-content-center mt-2 font-medium&quot;&gt;{{
                        data.note
                        }}&lt;/small&gt;
                    }
                    &lt;!-- checkbox --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;checkbox&#x27;) {
                    &lt;div class&#x3D;&quot;flex align-items-center gap-1 my-auto h-full&quot;&gt;
                        &lt;p-checkbox [formControlName]&#x3D;&quot;data.name&quot; [value]&#x3D;&quot;data.name&quot; [id]&#x3D;&quot;data.name&quot;&gt;&lt;/p-checkbox&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot; class&#x3D;&quot;ml-1&quot;&gt;{{ data.placeholder }}&lt;/label&gt;
                    &lt;/div&gt;
                    }
                    &lt;!-- multi-select --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;multi-select&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold w-full&quot;&gt;
                        &lt;p-autoComplete ref-iD [formControlName]&#x3D;&quot;data.name&quot; [suggestions]&#x3D;&quot;data.data&quot; field&#x3D;&quot;label&quot;
                            [selectOnFocus]&#x3D;&quot;true&quot; [inputId]&#x3D;&quot;data.name&quot; styleClass&#x3D;&quot;w-full&quot; inputStyleClass&#x3D;&quot;w-full&quot;
                            [multiple]&#x3D;&quot;true&quot; [readonly]&#x3D;&quot;true&quot; (onFocus)&#x3D;&quot;iD.show()&quot;
                            [panelStyle]&#x3D;&quot;{ &#x27;max-height&#x27;: &#x27;500px&#x27; }&quot;&gt;
                            &lt;ng-template pTemplate&#x3D;&quot;item&quot; let-item&gt;
                                &lt;div (click)&#x3D;&quot;onSelectFeature($event, section.value +&#x27;.&#x27; + data.name, item)&quot;&gt;{{
                                    item.label }}&lt;/div&gt;
                            &lt;/ng-template&gt;
                        &lt;/p-autoComplete&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{ data.placeholder }}&lt;/label&gt;
                    &lt;/span&gt;
                    }
                    &lt;!-- multi-choice --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;multi-choice&#x27;) {
                    &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold w-full&quot;&gt;
                        &lt;p-multiSelect [options]&#x3D;&quot;data.data&quot; [formControlName]&#x3D;&quot;data.name&quot; optionLabel&#x3D;&quot;label&quot;
                            [placeholder]&#x3D;&quot;data.placeholder&quot; [inputId]&#x3D;&quot;data.name&quot; styleClass&#x3D;&quot;w-full&quot; display&#x3D;&quot;chip&quot; /&gt;
                        &lt;label [for]&#x3D;&quot;data.name&quot;&gt;{{ data.placeholder }}&lt;/label&gt;
                    &lt;/span&gt;
                    }
                    &lt;!-- selection --&gt;
                    @if(data.type &#x3D;&#x3D;&#x3D; &#x27;selection&#x27;) {
                    &lt;form class&#x3D;&quot;formgrid grid mt-2&quot; [formGroupName]&#x3D;&quot;iD&quot;&gt;
                        @for (item of data.element; track item; let iSL &#x3D; $index) {
                        &lt;div [class]&#x3D;&quot;&#x27;col-12 md:&#x27;+ item.class&quot;&gt;
                            &lt;!-- textbox --&gt;
                            @if(item.type &#x3D;&#x3D;&#x3D; &#x27;textbox&#x27;) {
                            @if(item.format &#x3D;&#x3D;&#x3D; &#x27;normal&#x27;) {
                            &lt;span class&#x3D;&quot;field p-float-label mt-3 text-sm font-semibold&quot;&gt;
                                &lt;input pInputText [formControlName]&#x3D;&quot;item.name&quot; [id]&#x3D;&quot;item.name&quot;
                                    [pKeyFilter]&#x3D;&quot;item.keyFilter ? $any(data.keyFilter) : null&quot;
                                    [placeholder]&#x3D;&quot;item.placeholder&quot; class&#x3D;&quot;w-full&quot; [readOnly]&#x3D;&quot;item.readonly&quot; /&gt;
                                &lt;label [for]&#x3D;&quot;item.name&quot;&gt;{{item.placeholder}}&lt;/label&gt;
                            &lt;/span&gt;
                            }
                            }
                            &lt;!-- dropdown --&gt;
                            @if(item.type &#x3D;&#x3D;&#x3D; &#x27;dropdown&#x27;) {
                            &lt;span class&#x3D;&quot;p-float-label mt-3 text-sm font-semibold&quot;&gt;
                                &lt;p-dropdown [options]&#x3D;&quot;item.data&quot; [formControlName]&#x3D;&quot;item.name&quot; styleClass&#x3D;&quot;w-full&quot;
                                    optionLabel&#x3D;&quot;label&quot; optionValue&#x3D;&quot;value&quot; [placeholder]&#x3D;&quot;item.placeholder&quot;
                                    [id]&#x3D;&quot;item.name&quot; [inputId]&#x3D;&quot;item.name&quot; [filter]&#x3D;&quot;true&quot;
                                    [readonly]&#x3D;&quot;checkElementDepend(item, section.value)&quot;&gt;&lt;/p-dropdown&gt;
                                &lt;label [for]&#x3D;&quot;item.name&quot;&gt;{{ item.placeholder }}&lt;/label&gt;
                            &lt;/span&gt;
                            }
                        &lt;/div&gt;
                        }
                        &lt;div class&#x3D;&quot;col-12 md:col-1 flex align-items-center justify-content-center&quot;
                            *ngIf&#x3D;&quot;data.removed&quot;&gt;
                            &lt;p-button icon&#x3D;&quot;pi pi-times&quot; [rounded]&#x3D;&quot;true&quot; [text]&#x3D;&quot;true&quot; severity&#x3D;&quot;danger&quot;
                                (onClick)&#x3D;&quot;onDeleteTaxesAndFees(section.value, iD)&quot; /&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                    }
                    &lt;ng-container *ngIf&#x3D;&quot;data.required&quot; [ngTemplateOutlet]&#x3D;&quot;formRequired&quot;
                        [ngTemplateOutletContext]&#x3D;&quot;{ section, element: data }&quot;&gt;
                    &lt;/ng-container&gt;
                    &lt;ng-container *ngIf&#x3D;&quot;data.pattern&quot; [ngTemplateOutlet]&#x3D;&quot;formPattern&quot;
                        [ngTemplateOutletContext]&#x3D;&quot;{ section, element: data }&quot;&gt;
                    &lt;/ng-container&gt;
                    &lt;div class&#x3D;&quot;text-xs ml-2 mt-1&quot; *ngIf&#x3D;&quot;data.readonly&quot;&gt;This field is read only.&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/p-panel&gt;
    &lt;/div&gt;
&lt;/form&gt;
} @placeholder(minimum 500ms) {
&lt;div class&#x3D;&quot;flex flex-column gap-2&quot;&gt;
    &lt;div class&#x3D;&quot;border-round border-1 shadow-2 surface-border p-4 surface-card&quot;&gt;
        &lt;p-skeleton styleClass&#x3D;&quot;w-full&quot; height&#x3D;&quot;50px&quot;&gt;&lt;/p-skeleton&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;border-round border-1 shadow-2 surface-border p-4 surface-card&quot;&gt;
        &lt;p-skeleton styleClass&#x3D;&quot;w-full&quot; height&#x3D;&quot;50px&quot;&gt;&lt;/p-skeleton&gt;
    &lt;/div&gt;
&lt;/div&gt;
}

&lt;!-- form dynamic validation --&gt;
&lt;!-- required validation --&gt;
&lt;ng-template #formRequired let-section&#x3D;&quot;section&quot; let-element&#x3D;&quot;element&quot;&gt;
    &lt;small class&#x3D;&quot;text-xs ml-2&quot;
        *ngIf&#x3D;&quot;!formCar.get(getFormNameForValidation(section, element))!.errors || formCar.get(getFormNameForValidation(section, element))!.untouched&quot;&gt;
        Required*
    &lt;/small&gt;
    &lt;small class&#x3D;&quot;form-validation-fail&quot;
        *ngIf&#x3D;&quot;formCar.get(getFormNameForValidation(section, element))!.invalid &amp;&amp; (formCar.get(getFormNameForValidation(section, element))!.dirty || formCar.get(getFormNameForValidation(section, element))!.touched)&quot;&gt;
        {{ commonService.replaceStringToCapitalize(element.name) }} is required.
    &lt;/small&gt;
&lt;/ng-template&gt;
&lt;!-- pattern validation --&gt;
&lt;ng-template #formPattern let-section&#x3D;&quot;section&quot; let-element&#x3D;&quot;element&quot;&gt;
    &lt;small class&#x3D;&quot;form-validation-fail&quot;
        *ngIf&#x3D;&quot;formCar.get(getFormNameForValidation(section, element))!.hasError(&#x27;pattern&#x27;)&quot;&gt;
        {{ commonService.replaceStringToCapitalize(element.name) }} is required {{ element.pattern.value }} {{
        element.pattern.type &#x3D;&#x3D;&#x3D; &#x27;string&#x27; ? &#x27;characters&#x27; : &#x27;digits&#x27;}}.
    &lt;/small&gt;
&lt;/ng-template&gt;

&lt;!-- dialog for vin decoding --&gt;
&lt;p-dialog [(visible)]&#x3D;&quot;isVinDecodingDialogOpen&quot; [modal]&#x3D;&quot;true&quot; [draggable]&#x3D;&quot;false&quot; styleClass&#x3D;&quot;flex w-11 md:w-10 lg:w-9&quot;
    (onHide)&#x3D;&quot;closeVerifyVIN()&quot;&gt;
    &lt;ng-template pTemplate&#x3D;&quot;header&quot;&gt;
        &lt;div class&#x3D;&quot;flex flex-column&quot;&gt;
            &lt;div class&#x3D;&quot;font-bold&quot;&gt;
                VIN Decoding
            &lt;/div&gt;
            &lt;div class&#x3D;&quot;text-xs text-color-secondary&quot;&gt;
                Enter Vin Number and we will auto fill details of the vehicle.
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/ng-template&gt;
    &lt;div class&#x3D;&quot;flex w-full&quot;&gt;
        &lt;form [formGroup]&#x3D;&quot;formVinDecode&quot; class&#x3D;&quot;formgrid grid row-gap-2 mt-1 w-full&quot;&gt;
            &lt;div class&#x3D;&quot;col-12 md:col-6&quot;&gt;
                &lt;input #vin type&#x3D;&quot;text&quot; formControlName&#x3D;&quot;number&quot; pInputText class&#x3D;&quot;w-full mt-1&quot; pKeyFilter&#x3D;&quot;alphanum&quot;
                    placeholder&#x3D;&quot;Enter VIN Number&quot; /&gt;
                &lt;div class&#x3D;&quot;text-xs mt-1 font-bold text-right&quot;&gt;{{ vin.value ? vin.value.length : 0 }} / 17 &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class&#x3D;&quot;col-12 md:col-6 mt-0 md:mt-1&quot;&gt;
                &lt;p-button label&#x3D;&quot;Decode VIN&quot; [disabled]&#x3D;&quot;formVinDecode.get(&#x27;number&#x27;)?.invalid&quot;
                    (onClick)&#x3D;&quot;verifyVIN()&quot;&gt;&lt;/p-button&gt;
            &lt;/div&gt;
            &lt;div class&#x3D;&quot;mx-2 flex flex-wrap w-full gap-2&quot;&gt;
                &lt;div class&#x3D;&quot;flex p-2 surface-ground border-round-md shadow-1 border-200 border-1 text-sm&quot;
                    *ngFor&#x3D;&quot;let config of arrVinInfo&quot;&gt;
                    &lt;div class&#x3D;&quot;mr-1 text-color-secondary&quot;&gt;{{ config.label }}:&lt;/div&gt;
                    &lt;div class&#x3D;&quot;font-semibold&quot;&gt;{{ config.value }}&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;/div&gt;
    &lt;p-divider&gt;&lt;/p-divider&gt;
    &lt;div class&#x3D;&quot;flex w-full justify-content-end&quot;&gt;
        &lt;p-button label&#x3D;&quot;SKIP&quot; styleClass&#x3D;&quot;mr-2&quot; size&#x3D;&quot;small&quot; [text]&#x3D;&quot;true&quot; [plain]&#x3D;&quot;true&quot;
            (onClick)&#x3D;&quot;formVinDecode.value.number ? resetFormData() : isVinDecodingDialogOpen &#x3D; false;&quot;&gt;&lt;/p-button&gt;
        &lt;p-button label&#x3D;&quot;CONTINUE&quot; size&#x3D;&quot;small&quot; [text]&#x3D;&quot;true&quot; severity&#x3D;&quot;success&quot;
            (onClick)&#x3D;&quot;isVinDecodingDialogOpen &#x3D; false&quot;&gt;&lt;/p-button&gt;
    &lt;/div&gt;
&lt;/p-dialog&gt;

&lt;!-- crop logo --&gt;
&lt;p-dialog styleClass&#x3D;&quot;w-11 md:w-10 lg:w-8&quot; [modal]&#x3D;&quot;true&quot; [visible]&#x3D;&quot;isImageCropDialogOpen&quot; [draggable]&#x3D;&quot;false&quot;
    [closeOnEscape]&#x3D;&quot;true&quot; [closable]&#x3D;&quot;false&quot;&gt;
    &lt;ng-template pTemplate&#x3D;&quot;header&quot;&gt;
        &lt;div class&#x3D;&quot;inline-flex align-items-center justify-content-center gap-2&quot;&gt;
            &lt;span class&#x3D;&quot;font-bold white-space-nowrap&quot;&gt;Crop Image By Moving&lt;/span&gt;
        &lt;/div&gt;
    &lt;/ng-template&gt;
    &lt;div class&#x3D;&quot;flex  justify-content-center w-full&quot; *ngIf&#x3D;&quot;currentCropImageUrl&quot;&gt;
        &lt;div style&#x3D;&quot;max-width:906px;max-height: 668px;&quot;&gt;
            &lt;image-cropper #cropperImage [maintainAspectRatio]&#x3D;&quot;true&quot; [aspectRatio]&#x3D;&quot;4 / 3&quot;
                [imageFile]&#x3D;&quot;$any(currentCropImageUrl.file)&quot; (imageCropped)&#x3D;&quot;setCropImage($event)&quot; format&#x3D;&quot;jpeg&quot;
                [cropperMaxWidth]&#x3D;&quot;1024&quot; [cropperMaxHeight]&#x3D;&quot;786&quot;&gt;&lt;/image-cropper&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;flex justify-content-center w-full mt-3&quot;&gt;
        &lt;p-button label&#x3D;&quot;Reset Crop&quot; severity&#x3D;&quot;danger&quot; (onClick)&#x3D;&quot;isImageCropDialogOpen &#x3D; false&quot;&gt;&lt;/p-button&gt;
        &lt;p-button label&#x3D;&quot;Set Image&quot; styleClass&#x3D;&quot;ml-2&quot;
            (onClick)&#x3D;&quot;setCropImage(); isImageCropDialogOpen &#x3D; false&quot;&gt;&lt;/p-button&gt;
    &lt;/div&gt;
&lt;/p-dialog&gt;

&lt;!-- confirm popup for media primary  --&gt;
&lt;p-confirmDialog key&#x3D;&quot;mediaPopup&quot;&gt;&lt;/p-confirmDialog&gt;</code></pre>
    </div>


    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><!-- header --><div class="flex justify-content-between align-items-center mb-3">    <div class="flex align-items-center font-bold text-3xl text-primary-600">        <div class="pl-3">            Car        </div>        <i class="pi pi-info-circle ml-2 flex align-items-center" tooltipPosition="bottom" tooltipPosition="right"            [pTooltip]="headerTooltipContent">        </i>        <ng-template #headerTooltipContent>            <div class="flex flex-column">                <div class="flex">                    <i class="pi pi-plus mr-2"></i>                    <div>                        <b>Add Car</b>, Fill below form                    </div>                </div>            </div>        </ng-template>    </div>    <div class="flex align-items-center gap-2">        <p-button label="Car List" [routerLink]="[\'/user/car-list\']" styleClass="mr-2 button-secondary" icon="pi pi-bars"            size="small"></p-button>        <p-button label="Clear Car" styleClass="mr-2" icon="pi pi-eraser" size="small" (onClick)="resetFormData()"            severity="danger"></p-button>        <p-button [label]="strFormButtonTitle" [icon]="\'pi pi-\' + (strEditId ? \'pencil\' : \'plus\')" size="small"            (onClick)="addCar()" [disabled]="formCar.invalid"></p-button>    </div></div><!-- body -->@defer (when (this.arrCarFormCopy?.length! > 0)) {<form [formGroup]="formCar">    <div *ngFor="let section of arrCarForm; let iS = index" [formGroupName]="section.value">        <p-panel [toggleable]="true" toggler="header" styleClass="shadow-1 mb-3" [header]="section.name"            [collapsed]="iS === 3 ? false : true">            <div class="formgrid grid">                <div class="flex w-full align-items-center justify-content-end">                    <p-button label="Add Tax & Fees" icon="pi pi-plus" size="small" styleClass="mb-3 mr-2"                        *ngIf="section.value === \'taxes_fees\'" (onClick)="onAddTaxesAndFees(section.value)" />                </div>                <div [class]="\'field col-12 md:\' + data.class" [ngClass]="{ \'mb-0\': data.type === \'selection\' }"                    *ngFor="let data of section.data; let iD = index">                    <!-- dropdown -->                    @if(data.type === \'dropdown\') {                    <span class="p-float-label mt-3 text-sm font-semibold"                        *ngIf="data.name === \'store\' && !localStorageService.userIsDealer() ? false : true">                        <p-dropdown [options]="data.data" [formControlName]="data.name" styleClass="w-full"                            optionLabel="label" optionValue="value" [placeholder]="data.placeholder" [id]="data.name"                            [inputId]="data.name" [filter]="true" [(ngModel)]="data.value"                            (onChange)="data.onChange ? checkAndModifyDependantElementMovement($event.value, data) : null"                            [readonly]="checkElementDepend(data, section.value)"></p-dropdown>                        <label [for]="data.name">{{data.placeholder}}</label>                    </span>                    }                    <!-- textbox -->                    @if(data.type === \'textbox\') {                    @if(data.format === \'normal\') {                    <span class="p-float-label mt-3 text-sm font-semibold">                        <input pInputText ref-iD [formControlName]="data.name" [id]="data.name"                            [pKeyFilter]="data.keyFilter ? $any(data.keyFilter) : null" [placeholder]="data.placeholder"                            class="w-full" [readOnly]="data.readonly" />                        <label *ngIf="!data.pattern" [for]="data.name">{{data.placeholder}}</label>                        <label *ngIf="data.pattern" [for]="data.name">                            {{data.placeholder}} - {{ iD.value ? iD.value.length : 0 }} / {{data.pattern!.value }}                        </label>                    </span>                    }                    @if (data.format === \'date\') {                    <span class="p-float-label mt-3 text-sm font-semibold">                        <p-calendar styleClass="w-full" [formControlName]="data.name" dateFormat="dd/mm/yy"                            [placeholder]="data.placeholder" [showIcon]="true" [id]="data.name" [minDate]="data.minDate"                            [dateFormat]="data.dateFormat"></p-calendar>                        <label [for]="data.name">{{data.placeholder}}</label>                    </span>                    }                    @if(data.format === \'currency\') {                    <span class="p-float-label mt-3 text-sm font-semibold p-input-icon-left w-full">                        <i class="pi pi-dollar"></i>                        <input type="number" pInputText [formControlName]="data.name"                            [pKeyFilter]="data.keyFilter ? $any(data.keyFilter) : null" [placeholder]="data.placeholder"                            class="w-full" [id]="data.name" />                        <label [for]="data.name">{{data.placeholder}}</label>                    </span>                    }                    @if(data.format === \'group\') {                    <span class="p-float-label mt-3 text-sm font-semibold">                        <p-inputGroup>                            <p-inputGroupAddon *ngIf="data.group_left">{{ data.group_string }}</p-inputGroupAddon>                            <input [type]="data.datatype" pInputText [formControlName]="data.name"                                [placeholder]="data.placeholder" class="w-full"                                [pKeyFilter]="data.keyFilter ? $any(data.keyFilter) : null" />                            <label class="ml-3" [for]="data.name">{{data.placeholder}}</label>                            <p-inputGroupAddon *ngIf="data.group_right">{{ data.group_string }}</p-inputGroupAddon>                        </p-inputGroup>                    </span>                    }                    @if(data.format === \'number\') {                    <span class="p-float-label mt-3 text-sm font-semibold">                        <p-floatLabel>                            <p-inputNumber [formControlName]="data.name" [inputId]="data.name" mode="decimal"                                [maxFractionDigits]="2" styleClass="w-full" [placeholder]="data.placeholder"                                [id]="data.name" inputStyleClass="w-full" [min]="0" />                            <label [for]="data.name">{{data.placeholder}}</label>                        </p-floatLabel>                    </span>                    }                    }                    <!-- select-button -->                    @if(data.type === \'select-button\') {                    <div class="flex mt-3">                        <div class="hidden lg:flex font-bold align-items-center">                            {{ commonService.replaceStringToCapitalize(data.name) + \':\' }} &nbsp;                        </div>                        <p-selectButton [options]="data.data" [formControlName]="data.name" optionLabel="label"                            optionValue="value" [allowEmpty]="false"></p-selectButton>                    </div>                    }                    <!-- textarea -->                    @if(data.type === \'textarea\') {                    <textarea rows="5" [formControlName]="data.name" class="w-full" cols="30"                        [placeholder]="data.placeholder" pInputTextarea></textarea>                    }                    <!-- editor -->                    @if(data.type === \'editor\') {                    <textarea rows="10" pInputTextarea [formControlName]="data.name" class="w-full"                        [placeholder]="data.placeholder"></textarea>                    }                    <!-- uploader -->                    @if(data.type === \'upload\') {                    <!-- uploader title -->                    <div class="font-semibold text-md mb-1">                        {{ findMediaFromArrCarMedia(data) && findMediaFromArrCarMedia(data).length ?                        findMediaFromArrCarMedia(data).length + \' Images\' : \'0 \' +                        commonService.replaceStringToCapitalize(data.name)}}                    </div>                    <!-- uploader container start -->                    <div class="file-container p-3" appUploadFile (fileDropped)="onFileDropped($event, data, section)">                        <!-- file upload error -->                        <div class="flex w-full justify-content-center align-items-center bg-red-100 border-round-lg p-2"                            *ngIf="data.error">                            <small class="form-validation-fail"> {{ data.error }} </small>                        </div>                        <!-- file uploaded listing -->                        <div #dropListContainer class="flex flex-wrap gap-1 w-full file-list" cdkDropListGroup                            *ngIf="findMediaFromArrCarMedia(data) && findMediaFromArrCarMedia(data).length">                            <div class="flex p-2" [cdkDropListData]="i"                                *ngFor="let item of findMediaFromArrCarMedia(data); let i = index" cdkDropList>                                <div class="relative shadow-2 bg-white" cdkDrag (cdkDragMoved)="dragMoved($event)"                                    [ngClass]="{ \'border-primary-500\': i === 0 }" [cdkDragData]="i"                                    *ngIf="item.mode !== \'delete\'" (cdkDragEntered)="dragEntered($event)"                                    (cdkDragDropped)="dragDropped($event, data.name)">                                    <img *ngIf="data.name === \'images\' && item.mode !== \'delete\'"                                        class="bg-contain bg-center bg-no-repeat w-full cursor-move surface-0"                                        [src]="item.previewUrl" [alt]="i">                                    <Video *ngIf="data.name === \'videos\'" [src]="item.previewUrl" autoplay                                        class="bg-contain bg-center bg-no-repeat w-full cursor-move h-7rem"> </Video>                                    <p-button icon="pi pi-times" severity="danger"                                        styleClass="absolute top-0 right-0 p-1 w-2rem border-noround"                                        (onClick)="deleteFile(i, data, section)"></p-button>                                    <p-button icon="pi pi-pencil" *ngIf="data.name === \'images\' && !item.uploaded"                                        styleClass="absolute top-0 left-0 p-1 w-2rem border-noround"                                        (onClick)="showSelectedImageInCropDialog(item.previewUrl, item.position, item.file)"></p-button>                                </div>                            </div>                        </div>                        <div class="container">                            <input type="file" id="fileDropRef" [multiple]="data.multiple" [accept]="data.accept"                                (change)="fileBrowseHandler($any($event.target!).files, data, section)"                                [formControlName]="data.name" />                            <div class="flex align-items-center">                                <h5>Drag and drop file here, or</h5>                                <p-button for="fileDropRef" label="Browse for files" styleClass="ml-2"></p-button>                            </div>                        </div>                    </div>                    <small *ngIf="data.note" class="text-xs flex w-full justify-content-center mt-2 font-medium">{{                        data.note                        }}</small>                    }                    <!-- checkbox -->                    @if(data.type === \'checkbox\') {                    <div class="flex align-items-center gap-1 my-auto h-full">                        <p-checkbox [formControlName]="data.name" [value]="data.name" [id]="data.name"></p-checkbox>                        <label [for]="data.name" class="ml-1">{{ data.placeholder }}</label>                    </div>                    }                    <!-- multi-select -->                    @if(data.type === \'multi-select\') {                    <span class="p-float-label mt-3 text-sm font-semibold w-full">                        <p-autoComplete ref-iD [formControlName]="data.name" [suggestions]="data.data" field="label"                            [selectOnFocus]="true" [inputId]="data.name" styleClass="w-full" inputStyleClass="w-full"                            [multiple]="true" [readonly]="true" (onFocus)="iD.show()"                            [panelStyle]="{ \'max-height\': \'500px\' }">                            <ng-template pTemplate="item" let-item>                                <div (click)="onSelectFeature($event, section.value +\'.\' + data.name, item)">{{                                    item.label }}</div>                            </ng-template>                        </p-autoComplete>                        <label [for]="data.name">{{ data.placeholder }}</label>                    </span>                    }                    <!-- multi-choice -->                    @if(data.type === \'multi-choice\') {                    <span class="p-float-label mt-3 text-sm font-semibold w-full">                        <p-multiSelect [options]="data.data" [formControlName]="data.name" optionLabel="label"                            [placeholder]="data.placeholder" [inputId]="data.name" styleClass="w-full" display="chip" />                        <label [for]="data.name">{{ data.placeholder }}</label>                    </span>                    }                    <!-- selection -->                    @if(data.type === \'selection\') {                    <form class="formgrid grid mt-2" [formGroupName]="iD">                        @for (item of data.element; track item; let iSL = $index) {                        <div [class]="\'col-12 md:\'+ item.class">                            <!-- textbox -->                            @if(item.type === \'textbox\') {                            @if(item.format === \'normal\') {                            <span class="field p-float-label mt-3 text-sm font-semibold">                                <input pInputText [formControlName]="item.name" [id]="item.name"                                    [pKeyFilter]="item.keyFilter ? $any(data.keyFilter) : null"                                    [placeholder]="item.placeholder" class="w-full" [readOnly]="item.readonly" />                                <label [for]="item.name">{{item.placeholder}}</label>                            </span>                            }                            }                            <!-- dropdown -->                            @if(item.type === \'dropdown\') {                            <span class="p-float-label mt-3 text-sm font-semibold">                                <p-dropdown [options]="item.data" [formControlName]="item.name" styleClass="w-full"                                    optionLabel="label" optionValue="value" [placeholder]="item.placeholder"                                    [id]="item.name" [inputId]="item.name" [filter]="true"                                    [readonly]="checkElementDepend(item, section.value)"></p-dropdown>                                <label [for]="item.name">{{ item.placeholder }}</label>                            </span>                            }                        </div>                        }                        <div class="col-12 md:col-1 flex align-items-center justify-content-center"                            *ngIf="data.removed">                            <p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="danger"                                (onClick)="onDeleteTaxesAndFees(section.value, iD)" />                        </div>                    </form>                    }                    <ng-container *ngIf="data.required" [ngTemplateOutlet]="formRequired"                        [ngTemplateOutletContext]="{ section, element: data }">                    </ng-container>                    <ng-container *ngIf="data.pattern" [ngTemplateOutlet]="formPattern"                        [ngTemplateOutletContext]="{ section, element: data }">                    </ng-container>                    <div class="text-xs ml-2 mt-1" *ngIf="data.readonly">This field is read only.</div>                </div>            </div>        </p-panel>    </div></form>} @placeholder(minimum 500ms) {<div class="flex flex-column gap-2">    <div class="border-round border-1 shadow-2 surface-border p-4 surface-card">        <p-skeleton styleClass="w-full" height="50px"></p-skeleton>    </div>    <div class="border-round border-1 shadow-2 surface-border p-4 surface-card">        <p-skeleton styleClass="w-full" height="50px"></p-skeleton>    </div></div>}<!-- form dynamic validation --><!-- required validation --><ng-template #formRequired let-section="section" let-element="element">    <small class="text-xs ml-2"        *ngIf="!formCar.get(getFormNameForValidation(section, element))!.errors || formCar.get(getFormNameForValidation(section, element))!.untouched">        Required*    </small>    <small class="form-validation-fail"        *ngIf="formCar.get(getFormNameForValidation(section, element))!.invalid && (formCar.get(getFormNameForValidation(section, element))!.dirty || formCar.get(getFormNameForValidation(section, element))!.touched)">        {{ commonService.replaceStringToCapitalize(element.name) }} is required.    </small></ng-template><!-- pattern validation --><ng-template #formPattern let-section="section" let-element="element">    <small class="form-validation-fail"        *ngIf="formCar.get(getFormNameForValidation(section, element))!.hasError(\'pattern\')">        {{ commonService.replaceStringToCapitalize(element.name) }} is required {{ element.pattern.value }} {{        element.pattern.type === \'string\' ? \'characters\' : \'digits\'}}.    </small></ng-template><!-- dialog for vin decoding --><p-dialog [(visible)]="isVinDecodingDialogOpen" [modal]="true" [draggable]="false" styleClass="flex w-11 md:w-10 lg:w-9"    (onHide)="closeVerifyVIN()">    <ng-template pTemplate="header">        <div class="flex flex-column">            <div class="font-bold">                VIN Decoding            </div>            <div class="text-xs text-color-secondary">                Enter Vin Number and we will auto fill details of the vehicle.            </div>        </div>    </ng-template>    <div class="flex w-full">        <form [formGroup]="formVinDecode" class="formgrid grid row-gap-2 mt-1 w-full">            <div class="col-12 md:col-6">                <input #vin type="text" formControlName="number" pInputText class="w-full mt-1" pKeyFilter="alphanum"                    placeholder="Enter VIN Number" />                <div class="text-xs mt-1 font-bold text-right">{{ vin.value ? vin.value.length : 0 }} / 17 </div>            </div>            <div class="col-12 md:col-6 mt-0 md:mt-1">                <p-button label="Decode VIN" [disabled]="formVinDecode.get(\'number\')?.invalid"                    (onClick)="verifyVIN()"></p-button>            </div>            <div class="mx-2 flex flex-wrap w-full gap-2">                <div class="flex p-2 surface-ground border-round-md shadow-1 border-200 border-1 text-sm"                    *ngFor="let config of arrVinInfo">                    <div class="mr-1 text-color-secondary">{{ config.label }}:</div>                    <div class="font-semibold">{{ config.value }}</div>                </div>            </div>        </form>    </div>    <p-divider></p-divider>    <div class="flex w-full justify-content-end">        <p-button label="SKIP" styleClass="mr-2" size="small" [text]="true" [plain]="true"            (onClick)="formVinDecode.value.number ? resetFormData() : isVinDecodingDialogOpen = false;"></p-button>        <p-button label="CONTINUE" size="small" [text]="true" severity="success"            (onClick)="isVinDecodingDialogOpen = false"></p-button>    </div></p-dialog><!-- crop logo --><p-dialog styleClass="w-11 md:w-10 lg:w-8" [modal]="true" [visible]="isImageCropDialogOpen" [draggable]="false"    [closeOnEscape]="true" [closable]="false">    <ng-template pTemplate="header">        <div class="inline-flex align-items-center justify-content-center gap-2">            <span class="font-bold white-space-nowrap">Crop Image By Moving</span>        </div>    </ng-template>    <div class="flex  justify-content-center w-full" *ngIf="currentCropImageUrl">        <div style="max-width:906px;max-height: 668px;">            <image-cropper #cropperImage [maintainAspectRatio]="true" [aspectRatio]="4 / 3"                [imageFile]="$any(currentCropImageUrl.file)" (imageCropped)="setCropImage($event)" format="jpeg"                [cropperMaxWidth]="1024" [cropperMaxHeight]="786"></image-cropper>        </div>    </div>    <div class="flex justify-content-center w-full mt-3">        <p-button label="Reset Crop" severity="danger" (onClick)="isImageCropDialogOpen = false"></p-button>        <p-button label="Set Image" styleClass="ml-2"            (onClick)="setCropImage(); isImageCropDialogOpen = false"></p-button>    </div></p-dialog><!-- confirm popup for media primary  --><p-confirmDialog key="mediaPopup"></p-confirmDialog></div>'
    var COMPONENTS = [{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'CarListComponent', 'selector': 'app-car-list'},{'name': 'CarManageComponent', 'selector': 'app-car-manage'},{'name': 'DealerDetailComponent', 'selector': 'app-dealer-detail'},{'name': 'FavouriteVehicleComponent', 'selector': 'app-favourite-vehicle'},{'name': 'FinanceApplicationComponent', 'selector': 'app-finance-application'},{'name': 'ForgetPasswordComponent', 'selector': 'app-forget-password'},{'name': 'HomeComponent', 'selector': 'app-home'},{'name': 'HomeComponent', 'selector': 'app-home'},{'name': 'IndexComponent', 'selector': 'app-index'},{'name': 'InquiryComponent', 'selector': 'app-inquiry'},{'name': 'LoaderComponent', 'selector': 'app-loader'},{'name': 'LoginComponent', 'selector': 'app-login'},{'name': 'PageNotFoundComponent', 'selector': 'app-page-not-found'},{'name': 'PrequalifyLoanComponent', 'selector': 'app-prequalify-loan'},{'name': 'PriceAlertComponent', 'selector': 'app-price-alert'},{'name': 'ProfileComponent', 'selector': 'app-profile'},{'name': 'RegisterComponent', 'selector': 'app-register'},{'name': 'SearchAlertComponent', 'selector': 'app-search-alert'},{'name': 'SearchComponent', 'selector': 'app-search'},{'name': 'StoreComponent', 'selector': 'app-store'},{'name': 'UserComponent', 'selector': 'app-user'},{'name': 'VehicleDetailComponent', 'selector': 'app-vehicle-detail'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'CarManageComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'CarManageComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
